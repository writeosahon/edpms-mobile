{"version":3,"sources":["controller.js"],"names":[],"mappings":"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","file":"controller-compiled.js","sourcesContent":["/**\r\n * Created by UTOPIA SOFTWARE on 26/7/2018.\r\n */\r\n\r\n/**\r\n * file defines all View-Models, Controllers and Event Listeners used by the app\r\n *\r\n * The 'utopiasoftware_app_namespace' namespace variable has being defined in the base js file.\r\n * The author uses the terms 'method' and function interchangeably; likewise the terms 'attribute' and 'property' are\r\n * also used interchangeably\r\n */\r\n\r\n// define the controller namespace\r\nutopiasoftware[utopiasoftware_app_namespace].controller = {\r\n\r\n\r\n    /**\r\n     * method contains the stratup/bootstrap code needed to initiate app logic execution\r\n     */\r\n    startup: function(){\r\n\r\n        // initialise the app libraries and plugins\r\n        ons.ready(async function () {\r\n            // set the default handler for the app\r\n            ons.setDefaultDeviceBackButtonListener(function(){\r\n                // does nothing for now!!\r\n            });\r\n\r\n            // create the view-reports-additional menu popover\r\n            await ons.createPopover(\"view-reports-additional-menu-popover-template\");\r\n\r\n            // displaying prepping message\r\n            $('#loader-modal-message').html(\"Loading App...\");\r\n            $('#loader-modal').get(0).show(); // show loader\r\n\r\n            if(window.localStorage.getItem(\"utopiasoftware-edpms-app-status\") &&\r\n                window.localStorage.getItem(\"utopiasoftware-edpms-app-status\") !== \"\"){ // there is a previous logged in user\r\n                // load the app main page\r\n                $('ons-splitter').get(0).content.load(\"app-main-template\");\r\n            }\r\n            else{ // there is no previously logged in user\r\n                // load the login page\r\n                $('ons-splitter').get(0).content.load(\"login-template\");\r\n            }\r\n\r\n            // START ALL CORDOVA PLUGINS CONFIGURATIONS\r\n            try{\r\n                // lock the orientation of the device to 'PORTRAIT'\r\n                screen.orientation.lock('portrait');\r\n            }\r\n            catch(err){}\r\n\r\n            try { // START ALL THE CORDOVA PLUGINS CONFIGURATION WHICH REQUIRE PROMISE SYNTAX\r\n\r\n                // prepare the inapp browser plugin by removing the default window.open() functionality\r\n                delete window.open;\r\n\r\n                // prepare the window.URL static object for use\r\n                window.URL = window.URL || window.webkitURL;\r\n\r\n                // note: for most promises, we will use async-wait syntax\\\r\n\r\n                // create the pouchdb app database\r\n                utopiasoftware[utopiasoftware_app_namespace].model.appDatabase = new PouchDB('ptrackerdatabase.db', {\r\n                    adapter: 'cordova-sqlite',\r\n                    location: 'default',\r\n                    androidDatabaseImplementation: 2\r\n                });\r\n\r\n                // create the database indexes used by the app\r\n                await Promise.all([utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.createIndex({\r\n                    index: {\r\n                        fields: ['TYPE'],\r\n                        name: 'DOC_TYPE_INDEX',\r\n                        ddoc: 'ptracker-index-designdoc'\r\n                    }}),\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.createIndex({\r\n                        index: {\r\n                            fields: ['PROJECTID', 'TYPE'],\r\n                            name: 'FIND_PROJECT_BY_ID_INDEX',\r\n                            ddoc: 'ptracker-index-designdoc'\r\n                        }\r\n                    }),\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.createIndex({\r\n                        index: {\r\n                            fields: ['BOQID'],\r\n                            name: 'FIND_BOQ_BY_ID_INDEX',\r\n                            ddoc: 'ptracker-index-designdoc'\r\n                        }\r\n                    }),\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.createIndex({\r\n                        index: {\r\n                            fields: ['TYPE', 'evaluatedBy'],\r\n                            name: 'FIND_SAVED_REPORT_BY_EVALUATED_BY',\r\n                            ddoc: 'ptracker-index-designdoc'\r\n                        }\r\n                    })]);\r\n\r\n                // create the view required view queries for the app database\r\n                try{\r\n                    await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.put({\r\n                        _id: '_design/saved_reports_view',\r\n                        views: {\r\n                            get_report_evaluated_by: {\r\n                                map: function (doc) {\r\n                                    if(doc.TYPE === \"saved report\"){\r\n                                        emit([doc.TYPE, doc.evaluatedBy, doc.dateStamp],\r\n                                            {_id: doc._id, _rev: doc._rev, dateStamp: doc.dateStamp, projectId: doc.projectData.PROJECTID});\r\n                                    }\r\n                                }.toString()\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                catch(error){}\r\n            }\r\n            catch(err){\r\n                console.log(\"APP LOADING ERROR\", err);\r\n            }\r\n            finally{\r\n                 // set status bar color\r\n                 StatusBar.backgroundColorByHexString(\"#00B2A0\");\r\n                 navigator.splashscreen.hide(); // hide the splashscreen\r\n                 utopiasoftware[utopiasoftware_app_namespace].model.isAppReady = true; // flag that app is fullyt loaded and ready\r\n            }\r\n\r\n        }); // end of ons.ready()\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the SIDE MENU page\r\n     */\r\n    sideMenuPageViewModel: {\r\n\r\n        /**\r\n         * method is triggered when the \"Sign Out\" button is clicked\r\n         * @returns {Promise<void>}\r\n         */\r\n        async signOutButtonClicked(){\r\n            console.log(\"STACKS\", $('#app-main-navigator').get(0).pages);\r\n            // remove the user details rev id from storage\r\n            window.localStorage.removeItem(\"utopiasoftware-edpms-app-status\");\r\n            // load the login page\r\n            await $('ons-splitter').get(0).content.load(\"login-template\");\r\n            // hide the side menu\r\n            $('ons-splitter').get(0).right.close();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Upload Reports\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async uploadReportsButtonClicked(){\r\n            // upload all the report evaluation sheets\r\n            var totalUploads = 0;\r\n\r\n            try{\r\n\r\n                totalUploads = await utopiasoftware[utopiasoftware_app_namespace].projectEvaluationReportData.\r\n                uploadProjectEvaluationReports(true);\r\n\r\n                if(totalUploads === 0) // no reports were uploaded.\r\n                {\r\n                    await ons.notification.alert('No evaluation reports to upload',\r\n                        {title: '<ons-icon icon=\"md-info\" style=\"color: #3f51b5\" size=\"33px\"></ons-icon> <span style=\"color: #3f51b5; display: inline-block; margin-left: 1em;\">No Reports Uploaded</span>',\r\n                            buttonLabels: ['OK'], modifier: 'utopiasoftware-alert-dialog'});\r\n                }\r\n                else{\r\n                    // inform user that all evaluation reports have been uploaded\r\n                    await ons.notification.alert(`All evaluation reports successfully uploaded. ${totalUploads} in total`,\r\n                        {title: '<ons-icon icon=\"fa-check\" style=\"color: #00B2A0;\" size=\"25px\"></ons-icon> <span style=\"color: #00B2A0; display: inline-block; margin-left: 1em;\">Uploaded Reports</span>',\r\n                            buttonLabels: ['OK'], modifier: 'utopiasoftware-alert-dialog'});\r\n                }\r\n\r\n                // call the method to refresh the contents of the View Reports page\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.pagePullHookAction();\r\n            }\r\n            catch(err){\r\n                ons.notification.alert(`uploading evaluation reports failed. Please try again. ${err.message || \"\"}`, {title: '<span style=\"color: red\">Uploading Reports Failed</span>',\r\n                    buttonLabels: ['OK'], modifier: 'utopiasoftware-alert-dialog'});\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"View Reports\" button is clicked\r\n         * @returns {Promise<void>}\r\n         */\r\n        async viewReportsButtonClicked(){\r\n\r\n            // push the \"View Reports\" page to view\r\n            await $(\"#app-main-navigator\").get(0).bringPageTop(\"view-reports-page.html\", {animation: \"slide\"});\r\n            // hide the side menu\r\n            $('ons-splitter').get(0).right.close();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the Refresh Offline Data button is clicked\r\n         * @returns {Promise<void>}\r\n         */\r\n        async refreshOfflineDataButtonClicked(){\r\n\r\n            try{\r\n\r\n                // reload/refresh the offline app data\r\n                await utopiasoftware[utopiasoftware_app_namespace].appCachedData.loadProjectData(true);\r\n\r\n                // inform user that app offline data has been refreshed\r\n                await ons.notification.alert(`App offline has been refreshed successfully`,\r\n                    {title: '<ons-icon icon=\"fa-check\" style=\"color: #00B2A0;\" size=\"25px\"></ons-icon> <span style=\"color: #00B2A0; display: inline-block; margin-left: 1em;\">Offline Data Refreshed</span>',\r\n                        buttonLabels: ['OK'], modifier: 'utopiasoftware-alert-dialog'});\r\n\r\n            }\r\n            catch(err){\r\n                ons.notification.alert(`refreshing app offline data failed. Please try again. ${err.message || \"\"}`, {title: '<span style=\"color: red\">Offline Data Refresh Failed</span>',\r\n                    buttonLabels: ['OK'], modifier: 'utopiasoftware-alert-dialog'});\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    /**\r\n     * this is the view-model/controller for the LOGIN page\r\n     */\r\n    loginPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the sign-in page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#login-navigator').get(0).topPage.onDeviceBackButton = function(){\r\n                    ons.notification.confirm('Do you want to close the app?', {title: 'Exit App',\r\n                        buttonLabels: ['No', 'Yes'], modifier: 'utopiasoftware-alert-dialog'}) // Ask for confirmation\r\n                        .then(function(index) {\r\n                            if (index === 1) { // OK button\r\n                                navigator.app.exitApp(); // Close the app\r\n                            }\r\n                        });\r\n                };\r\n\r\n                // adjust the window/view-port settings for when the soft keyboard is displayed\r\n                //window.SoftInputMode.set('adjustPan'); // let the window/view-port 'pan' when the soft keyboard is displayed\r\n                window.SoftInputMode.set('adjustResize');\r\n\r\n                // initialise the login form validation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.formValidator =\r\n                    $('#login-form').parsley();\r\n\r\n                // listen for log in form field validation failure event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.formValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    $(fieldInstance.$element).addClass(\"hint--always hint--success hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).attr(\"data-hint\", fieldInstance.getErrorsMessages()[0]);\r\n                });\r\n\r\n                // listen for log in form field validation success event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.formValidator.on('field:success', function(fieldInstance) {\r\n                    // remove tooltip from element\r\n                    $(fieldInstance.$element).removeClass(\"hint--always hint--success hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).removeAttr(\"data-hint\");\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.formValidator.on('form:success',\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.formValidated);\r\n\r\n                // hide the loader\r\n                $('#loader-modal').get(0).hide();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // adjust the window/view-port settings for when the soft keyboard is displayed\r\n            window.SoftInputMode.set('adjustResize'); // let the window/view-port 'pan' when the soft keyboard is displayed\r\n\r\n            // listen for when the device keyboard is hidden\r\n            window.addEventListener(\"keyboardDidHide\", utopiasoftware[utopiasoftware_app_namespace].\r\n                controller.loginPageViewModel.keyboardHidden);\r\n\r\n            // listen for when the device keyboard is shown\r\n            window.addEventListener(\"keyboardDidShow\", utopiasoftware[utopiasoftware_app_namespace].\r\n                controller.loginPageViewModel.keyboardShown);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: function(){\r\n            // adjust the window/view-port settings for when the soft keyboard is displayed\r\n            // window.SoftInputMode.set('adjustResize'); // let the view 'resize' when the soft keyboard is displayed\r\n\r\n            try {\r\n                // remove the listeners registered to listen for when the device keyboard is hidden and shown\r\n                window.removeEventListener(\"keyboardDidHide\", utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.loginPageViewModel.keyboardHidden);\r\n                window.removeEventListener(\"keyboardDidShow\", utopiasoftware[utopiasoftware_app_namespace].\r\n                    controller.loginPageViewModel.keyboardShown);\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#login-page [data-hint]').removeClass(\"hint--always hint--success hint--medium hint--rounded hint--no-animate\");\r\n                $('#login-page [data-hint]').removeAttr(\"data-hint\");\r\n                // reset the form validator object on the page\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.formValidator.reset();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n            try {\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#login-page [data-hint]').removeClass(\"hint--always hint--success hint--medium hint--rounded hint--no-animate\");\r\n                $('#login-page [data-hint]').removeAttr(\"data-hint\");\r\n                // reset the form validator object on the page\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.formValidator.destroy();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method will be triggered when the device keyboard is hidden. This is an event listener\r\n         */\r\n        keyboardHidden(){\r\n            // show the title banner on the home page\r\n            $('#login-page .login-title-banner').css(\"display\", \"block\");\r\n        },\r\n\r\n        /**\r\n         * method will be triggered when the device keyboard is shown. This is an event listener\r\n         */\r\n        keyboardShown(){\r\n            // hide the title banner on the home page\r\n            $('#login-page .login-title-banner').css(\"display\", \"none\");\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Sign In / Log In\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async loginButtonClicked(){\r\n\r\n            // run the validation method for the sign-in form\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.loginPageViewModel.formValidator.whenValidate();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the enter button is clicked on the device keyboard\r\n         *\r\n         * @param keyEvent\r\n         * @returns {Promise<void>}\r\n         */\r\n        async enterButtonClicked(keyEvent){\r\n            // check which key was pressed\r\n            if(keyEvent.which === kendo.keys.ENTER) // if the enter key was pressed\r\n            {\r\n                // prevent the default action from occurring\r\n                keyEvent.preventDefault();\r\n                keyEvent.stopImmediatePropagation();\r\n                keyEvent.stopPropagation();\r\n                // hide the device keyboard\r\n                Keyboard.hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the form is successfully validated\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async formValidated(){\r\n\r\n            // check if Internet Connection is available before proceeding\r\n            if(navigator.connection.type === Connection.NONE){ // no Internet Connection\r\n                // inform the user that they cannot proceed without Internet\r\n                window.plugins.toast.showWithOptions({\r\n                    message: \"You cannot sign in without an Internet Connection\",\r\n                    duration: 4000,\r\n                    position: \"top\",\r\n                    styling: {\r\n                        opacity: 1,\r\n                        backgroundColor: '#ff0000', //red\r\n                        textColor: '#FFFFFF',\r\n                        textSize: 14\r\n                    }\r\n                }, function(toastEvent){\r\n                    if(toastEvent && toastEvent.event == \"touch\"){ // user tapped the toast, so hide toast immediately\r\n                        window.plugins.toast.hide();\r\n                    }\r\n                });\r\n\r\n                return; // exit method immediately\r\n            }\r\n\r\n            // inform user that login validation is taking place\r\n            $('#loader-modal #loader-modal-message').html(\"Signing You In...\");\r\n            await $('#loader-modal').get(0).show();\r\n\r\n            try{\r\n                // create the form data to be submitted\r\n                let formData = {\r\n                    username: $('#login-page #login-email').val().trim(),\r\n                    password: $('#login-page #login-password').val().trim()\r\n                };\r\n\r\n                let serverResponse = await Promise.resolve($.ajax(\r\n                    {\r\n                        url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/mobile/login.php\",\r\n                        type: \"post\",\r\n                        contentType: \"application/x-www-form-urlencoded\",\r\n                        beforeSend: function(jqxhr) {\r\n                            jqxhr.setRequestHeader(\"X-PTRACKER-APP\", \"mobile\");\r\n                        },\r\n                        dataType: \"text\",\r\n                        timeout: 240000, // wait for 4 minutes before timeout of request\r\n                        processData: true,\r\n                        data: formData\r\n                    }\r\n                ));\r\n                // convert the response to an object\r\n                serverResponse = JSON.parse(serverResponse.trim());\r\n\r\n                // check if the user login was successful\r\n                if(serverResponse.status !== \"success\"){ // user log was NOT successful\r\n                    throw serverResponse; // throw error\r\n                }\r\n\r\n                // save the user's details\r\n                utopiasoftware[utopiasoftware_app_namespace].model.userDetails = {\r\n                    _id: \"userDetails\",\r\n                    userDetails: {firstname: serverResponse.firstname, username: serverResponse.username},\r\n                    type: \"userDetails\",\r\n                    _rev: (window.localStorage.getItem(\"utopiasoftware-edpms-app-status\") &&\r\n                        window.localStorage.getItem(\"utopiasoftware-edpms-app-status\") !== \"\") ?\r\n                        window.localStorage.getItem(\"utopiasoftware-edpms-app-status\") : null\r\n                };\r\n\r\n                // check if the user wants to remain signed in\r\n                if($('#login-page #login-remember-me').get(0).checked){ // the user wants to remian signed in\r\n                    // save the user's details to persistent database\r\n                    let userDetailsDoc = null; // holds the previous stored user details from the database\r\n                    try{\r\n                        // check if a user details object has been previously saved in app database\r\n                        userDetailsDoc = await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.get('userDetails');\r\n                    }catch(error){}\r\n\r\n                    if(!userDetailsDoc){ // no userDetails object has been previous saved\r\n                        delete utopiasoftware[utopiasoftware_app_namespace].model.userDetails._rev; // delete the _rev property\r\n                    }\r\n                    else{ // user details object has been previously saved\r\n                        // update the _rev property of the userDetails object being used by the app\r\n                        utopiasoftware[utopiasoftware_app_namespace].model.userDetails._rev = userDetailsDoc._rev;\r\n                    }\r\n\r\n                    // saved the user details object in the app database\r\n                    let databaseResponse = await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.put(\r\n                        utopiasoftware[utopiasoftware_app_namespace].model.userDetails);\r\n                    // save the returned user details rev id\r\n                    window.localStorage.setItem(\"utopiasoftware-edpms-app-status\", databaseResponse.rev);\r\n                }\r\n                else{ // user does not want to remain signed in\r\n                    // remove the user details rev id from storage\r\n                    window.localStorage.removeItem(\"utopiasoftware-edpms-app-status\");\r\n                }\r\n\r\n                // flag that the user just completed a sign in for this session\r\n                window.sessionStorage.setItem(\"utopiasoftware-edpms-user-logged-in\", \"yes\");\r\n\r\n                // move user to the main menu page\r\n                await Promise.all([$('ons-splitter').get(0).content.load(\"app-main-template\"),\r\n                    $('#loader-modal').get(0).hide()]);\r\n            }\r\n            catch(err){\r\n                $('#loader-modal').get(0).hide();\r\n                ons.notification.alert(err.message, {title: '<span style=\"color: red\">Sign In Failed</span>',\r\n                    buttonLabels: ['OK'], modifier: 'utopiasoftware-alert-dialog'});\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Search Project page\r\n     */\r\n    searchProjectPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the sign-in page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * object holds the currently searched and chosen project object\r\n         */\r\n        currentlySelectedProject: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                /*$('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.searchProjectPageViewModel.backButtonClicked;*/\r\n                event.target.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.searchProjectPageViewModel.backButtonClicked;\r\n\r\n                // initialise the login form validation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.searchProjectPageViewModel.formValidator =\r\n                    $('#search-project-form').parsley();\r\n\r\n                // listen for log in form field validation failure event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.searchProjectPageViewModel.formValidator.on('field:error', function(fieldInstance) {\r\n                    // get the element that triggered the field validation error and use it to display tooltip\r\n                    // display tooltip\r\n                    $(fieldInstance.$element).addClass(\"hint--always hint--success hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).attr(\"data-hint\", fieldInstance.getErrorsMessages()[0]);\r\n                });\r\n\r\n                // listen for log in form field validation success event\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.searchProjectPageViewModel.\r\n                formValidator.on('field:success', function(fieldInstance) {\r\n                    // remove tooltip from element\r\n                    $(fieldInstance.$element).removeClass(\"hint--always hint--success hint--medium hint--rounded hint--no-animate\");\r\n                    $(fieldInstance.$element).removeAttr(\"data-hint\");\r\n                });\r\n\r\n                // listen for log in form validation success\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.searchProjectPageViewModel.formValidator.on('form:success',\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.searchProjectPageViewModel.formValidated);\r\n\r\n                try{\r\n\r\n                    // keep device awake during the downloading process\r\n                    window.plugins.insomnia.keepAwake();\r\n                    // check if the user just completed a signin or log-in\r\n                    if(window.sessionStorage.getItem(\"utopiasoftware-edpms-user-logged-in\") === \"yes\" &&\r\n                        window.sessionStorage.getItem(\"utopiasoftware-edpms-refresh-page\") !== \"yes\") {\r\n                        // beginning uploading app data\r\n                        $('#determinate-progress-modal .modal-message').html('Downloading projects data for offline use...');\r\n                        $('#determinate-progress-modal').get(0).show();\r\n                        $('#determinate-progress-modal #determinate-progress').get(0).value = 30;\r\n\r\n                        // get the projects data to be cached\r\n                        let serverResponse = await Promise.resolve($.ajax(\r\n                            {\r\n                                url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/mobile/loadprojects.php\",\r\n                                type: \"post\",\r\n                                contentType: \"application/x-www-form-urlencoded\",\r\n                                beforeSend: function(jqxhr) {\r\n                                    jqxhr.setRequestHeader(\"X-PTRACKER-APP\", \"mobile\");\r\n                                },\r\n                                dataType: \"text\",\r\n                                timeout: 240000, // wait for 4 minutes before timeout of request\r\n                                processData: true,\r\n                                data: {}\r\n                            }\r\n                        ));\r\n\r\n                        serverResponse = JSON.parse(serverResponse); // convert the response to JSON object\r\n\r\n                        $('#determinate-progress-modal #determinate-progress').get(0).value = 35;\r\n\r\n                        // delete all previous project data/docs\r\n                        let allProjects = await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.find({\r\n                            selector: {\r\n                                \"TYPE\": {\r\n                                    \"$eq\": \"projects\"\r\n                                }},\r\n                            fields: [\"_id\", \"_rev\", \"PROJECTID\", \"TITLE\", \"CONTRACTSUM\", \"CONTRACTOR\", \"CONTRACTORID\", \"MDAID\", \"TYPE\"],\r\n                            use_index: [\"ptracker-index-designdoc\", \"DOC_TYPE_INDEX\"]\r\n                        });\r\n\r\n                        // get all the returned projects and delete them\r\n                        allProjects = allProjects.docs.map((currentValue, index, array) => {\r\n                            currentValue._deleted = true; // mark the document as deleted\r\n                            return currentValue;\r\n                        });\r\n\r\n                        // check if there are any project data to delete\r\n                        if(allProjects.length > 0){\r\n                            // delete the already saved projects\r\n                            await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.bulkDocs(allProjects);\r\n                        }\r\n\r\n                        $('#determinate-progress-modal #determinate-progress').get(0).value = 45;\r\n\r\n                        // store the all the project data received\r\n                        await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.bulkDocs(serverResponse);\r\n                        // inform the user that milestone data is being downloaded for offline use\r\n                        $('#determinate-progress-modal .modal-message').html('Downloading milestones data for offline use...');\r\n\r\n                        $('#determinate-progress-modal #determinate-progress').get(0).value = 50;\r\n\r\n                        // get the milestones data to be cached\r\n                        serverResponse = await Promise.resolve($.ajax(\r\n                            {\r\n                                url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/mobile/loadboq.php\",\r\n                                type: \"post\",\r\n                                contentType: \"application/x-www-form-urlencoded\",\r\n                                beforeSend: function(jqxhr) {\r\n                                    jqxhr.setRequestHeader(\"X-PTRACKER-APP\", \"mobile\");\r\n                                },\r\n                                dataType: \"text\",\r\n                                timeout: 240000, // wait for 4 minutes before timeout of request\r\n                                processData: true,\r\n                                data: {}\r\n                            }\r\n                        ));\r\n\r\n                        serverResponse = JSON.parse(serverResponse); // convert the response to JSON object\r\n\r\n                        $('#determinate-progress-modal #determinate-progress').get(0).value = 65;\r\n\r\n                        // delete all previous milestones /docs\r\n                        allProjects = await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.find({\r\n                            selector: {\r\n                                \"TYPE\": {\r\n                                    \"$eq\": \"BOQ\"\r\n                                }},\r\n                            fields: [\"_id\", \"_rev\", \"CATEGORY\", \"AMOUNT\", \"RATE\", \"PROJECTID\", \"DDATE\", \"BOQID\", \"TYPE\"],\r\n                            use_index: [\"ptracker-index-designdoc\", \"DOC_TYPE_INDEX\"]\r\n                        });\r\n\r\n                        // get all the returned milestones and delete them\r\n                        allProjects = allProjects.docs.map((currentValue, index, array) => {\r\n                            currentValue._deleted = true; // mark the document as deleted\r\n                            return currentValue;\r\n                        });\r\n\r\n                        // check if there are any milestone data to delete\r\n                        if(allProjects.length > 0){\r\n                            // delete the already saved milestone data\r\n                            await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.bulkDocs(allProjects);\r\n                        }\r\n\r\n                        $('#determinate-progress-modal #determinate-progress').get(0).value = 80;\r\n\r\n                        // store the all the milestone data received\r\n                        await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.bulkDocs(serverResponse);\r\n\r\n                        // inform the user that approved evaluation data is being downloaded for offline use\r\n                        $('#determinate-progress-modal .modal-message').html('Downloading approved evaluation data for offline use...');\r\n                        $('#determinate-progress-modal #determinate-progress').get(0).value = 85;\r\n\r\n                        // get previously uploaded and approved project evaluation reports\r\n                        serverResponse = await Promise.resolve($.ajax(\r\n                            {\r\n                                url: utopiasoftware[utopiasoftware_app_namespace].model.appBaseUrl + \"/mobile/load-current-evaluations.php\",\r\n                                type: \"post\",\r\n                                contentType: \"application/x-www-form-urlencoded\",\r\n                                beforeSend: function(jqxhr) {\r\n                                    jqxhr.setRequestHeader(\"X-PTRACKER-APP\", \"mobile\");\r\n                                },\r\n                                dataType: \"text\",\r\n                                timeout: 240000, // wait for 4 minutes before timeout of request\r\n                                processData: true,\r\n                                data: {}\r\n                            }\r\n                        ));\r\n\r\n                        serverResponse = JSON.parse(serverResponse); // convert the response to JSON object\r\n\r\n                        $('#determinate-progress-modal #determinate-progress').get(0).value = 90;\r\n\r\n                        // delete all previously stored/cached approved project evaluation reports\r\n                        allProjects = await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.find({\r\n                            selector: {\r\n                                \"TYPE\": {\r\n                                    \"$eq\": \"project evaluations\"\r\n                                }},\r\n                            use_index: [\"ptracker-index-designdoc\", \"DOC_TYPE_INDEX\"]\r\n                        });\r\n\r\n                        // get all the returned approved evaluation report and delete them\r\n                        allProjects = allProjects.docs.map((currentValue, index, array) => {\r\n                            currentValue._deleted = true; // mark the document as deleted\r\n                            return currentValue;\r\n                        });\r\n\r\n                        // check if there are any approved evaluation report to delete\r\n                        if(allProjects.length > 0){\r\n                            // delete the previously saved/cached approved evaluation report\r\n                            await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.bulkDocs(allProjects);\r\n                        }\r\n\r\n                        // format the retrieved evaluation report before storing in the app database\r\n                        serverResponse = serverResponse.map((currentValue, index, array) => {\r\n                            // format/convert the EVALUATIONS field to proper json\r\n                            currentValue.EVALUATIONS = JSON.parse(currentValue.EVALUATIONS);\r\n                            return currentValue;\r\n                        });\r\n\r\n                        $('#determinate-progress-modal #determinate-progress').get(0).value = 100;\r\n\r\n                        // store the all the milestone data received\r\n                        await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.bulkDocs(serverResponse);\r\n                    }\r\n\r\n                    // check if the user just completed a signin or log-in\r\n                    if(window.sessionStorage.getItem(\"utopiasoftware-edpms-user-logged-in\") !== \"yes\" &&\r\n                        ! utopiasoftware[utopiasoftware_app_namespace].model.userDetails) { // user did NOT just log in / sign in\r\n                        // get the userDetails data from the app database\r\n                        utopiasoftware[utopiasoftware_app_namespace].model.userDetails =\r\n                            (await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.get(\"userDetails\"));\r\n                    }\r\n\r\n                    // check if the user just completed a signin or log-in\r\n                    if(window.sessionStorage.getItem(\"utopiasoftware-edpms-user-logged-in\") === \"yes\" &&\r\n                        window.sessionStorage.getItem(\"utopiasoftware-edpms-refresh-page\") !== \"yes\") {\r\n                        // hide the progress loader\r\n                        await Promise.all([$('#determinate-progress-modal').get(0).hide()]);\r\n                    }\r\n\r\n                    // hide the loader modal\r\n                    await Promise.all([$('#loader-modal').get(0).hide()]);\r\n\r\n                    // this only displays when page is NOT marked as being loaded from a user refresh request\r\n                    if(window.sessionStorage.getItem(\"utopiasoftware-edpms-refresh-page\") !== \"yes\") {\r\n                        // display a toast to the user\r\n                        ons.notification.toast(`<ons-icon icon=\"md-check\" size=\"20px\" style=\"color: #00D5C3\"></ons-icon> <span style=\"text-transform: capitalize; display: inline-block; margin-left: 1em\">Welcome ${utopiasoftware[utopiasoftware_app_namespace].model.userDetails.userDetails.firstname}</span>`, {timeout: 3000});\r\n                    }\r\n                }\r\n                catch(err){\r\n                    // display error message indicating that projects data could not be loaded\r\n                    $('#search-project-page .project-data-download-error').css(\"display\", \"block\");\r\n                    $('#determinate-progress-modal').get(0).hide();\r\n                    $('#loader-modal').get(0).hide();\r\n                }\r\n                finally {\r\n                    // clear the page refresh marker from device session storage\r\n                    window.sessionStorage.removeItem(\"utopiasoftware-edpms-refresh-page\");\r\n                    window.plugins.insomnia.allowSleepAgain(); // the device can go to sleep now\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // adjust the window/view-port settings for when the soft keyboard is displayed\r\n            window.SoftInputMode.set('adjustPan'); // let the window/view-port 'pan' when the soft keyboard is displayed\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: function(){\r\n            // adjust the window/view-port settings for when the soft keyboard is displayed\r\n            // window.SoftInputMode.set('adjustResize'); // let the view 'resize' when the soft keyboard is displayed\r\n            try {\r\n                // remove any tooltip being displayed on all forms on the page\r\n                $('#search-project-page [data-hint]').removeClass(\"hint--always hint--success hint--medium hint--rounded hint--no-animate\");\r\n                $('#search-project-page [data-hint]').removeAttr(\"data-hint\");\r\n                // reset the form validator object on the page\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.searchProjectPageViewModel.formValidator.reset();\r\n            }\r\n            catch(err){}\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n            // remove any tooltip being displayed on all forms on the page\r\n            $('#search-project-page [data-hint]').removeClass(\"hint--always hint--success hint--medium hint--rounded hint--no-animate\");\r\n            $('#search-project-page [data-hint]').removeAttr(\"data-hint\");\r\n            // reset the form validator object on the page\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.searchProjectPageViewModel.formValidator.destroy();\r\n            // destroy the currently selected project object\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.searchProjectPageViewModel.\r\n                currentlySelectedProject = null;\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the \"Project Search\" button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async searchButtonClicked(keyEvent){\r\n\r\n            // check which key was pressed\r\n            if(keyEvent.which === kendo.keys.ENTER) // if the enter key was pressed\r\n            {\r\n                // run the validation method for the project search form\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.searchProjectPageViewModel.formValidator.whenValidate();\r\n                keyEvent.preventDefault();\r\n                keyEvent.stopImmediatePropagation();\r\n                keyEvent.stopPropagation();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the download of projects data fails and\r\n         * the user hits the \"Please Retry\" button\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async retryProjectDataDownloadButtonClicked(){\r\n\r\n            // hide the page preloader\r\n            $('#search-project-page .page-preloader').css(\"display\", \"none\");\r\n            // hide the previous project details being displayed\r\n            $('#search-project-page #search-project-details').css(\"display\", \"none\");\r\n            // hide all previous error messages (if any)\r\n            $('#search-project-page .no-project-found').css(\"display\", \"none\");\r\n            $('#search-project-page .project-data-download-error').css(\"display\", \"none\");\r\n            // hide the device keyboard\r\n            Keyboard.hide();\r\n\r\n            try {\r\n                // call the method used to load app project data into the persistent database\r\n                await utopiasoftware[utopiasoftware_app_namespace].appCachedData.loadProjectData(true);\r\n                // error the project data download error message\r\n                $('#search-project-page .project-data-download-error').css(\"display\", \"none\");\r\n            }\r\n            catch(err){\r\n                // display the project data download error message\r\n                $('#search-project-page .project-data-download-error').css(\"display\", \"block\");\r\n            }\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the project search search/find form is successfully validated\r\n         * @returns {Promise<void>}\r\n         */\r\n        async formValidated(){\r\n            // show the page preloader\r\n            $('#search-project-page .page-preloader').css(\"display\", \"block\");\r\n            // hide the previous project details being displayed\r\n            $('#search-project-page #search-project-details').css(\"display\", \"none\");\r\n            // hide all previous error messages (if any)\r\n            $('#search-project-page .no-project-found').css(\"display\", \"none\");\r\n            $('#search-project-page .project-data-download-error').css(\"display\", \"none\");\r\n            // hide the bottom toolbar of the page\r\n            $('#search-project-page ons-bottom-toolbar').css(\"display\", \"none\");\r\n\r\n            // hide the device keyboard\r\n            Keyboard.hide();\r\n\r\n            try{\r\n\r\n                // search the app database for the project id provided\r\n                let dbQueryResult = await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.find({\r\n                    selector: {\r\n                        \"PROJECTID\": {\r\n                            \"$eq\": $('#search-project-page #search-project-search-input').get(0).value.trim().toLocaleUpperCase()\r\n                        },\r\n                        \"TYPE\": {\r\n                          \"$eq\": \"projects\"\r\n                        }},\r\n                    fields: [\"_id\", \"_rev\", \"PROJECTID\", \"TITLE\", \"CONTRACTSUM\", \"CONTRACTOR\", \"CONTRACTORID\", \"MDAID\", \"TYPE\"],\r\n                    use_index: [\"ptracker-index-designdoc\", \"FIND_PROJECT_BY_ID_INDEX\"]\r\n                });\r\n\r\n                // check that the requested project was found\r\n                if(dbQueryResult.docs.length == 0){ // search project was NOT FOUND\r\n                    // hide the page preloader\r\n                    $('#search-project-page .page-preloader').css(\"display\", \"none\");\r\n                    // inform user that no project was found\r\n                    $('#search-project-page .no-project-found').css(\"display\", \"block\");\r\n                    // hide the previous project details being displayed\r\n                    $('#search-project-page #search-project-details').css(\"display\", \"none\");\r\n                    // hide all previous error messages\r\n                    $('#search-project-page .project-data-download-error').css(\"display\", \"none\");\r\n                    // hide the bottom toolbar of the page\r\n                    $('#search-project-page ons-bottom-toolbar').css(\"display\", \"none\");\r\n                    return; // exit the method here\r\n                }\r\n\r\n                // if the method gets to this point, it means a project was found\r\n                // assign the searched project object as the currently searched and chosen project object\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.searchProjectPageViewModel.\r\n                    currentlySelectedProject = dbQueryResult.docs[0];\r\n                // create the searched project details to be displayed\r\n                let searchedProjectDetails = `<div class=\"col-xs-6\" style=\"font-weight: bold; color: #000000; padding: 1rem;\">Project ID</div>`;\r\n                searchedProjectDetails += `<div class=\"col-xs-6\" style=\"color: #000000; text-transform: uppercase; padding: 1rem;\">${dbQueryResult.docs[0].PROJECTID}</div>`;\r\n                searchedProjectDetails += `<div class=\"col-xs-6\" style=\"font-weight: bold; color: #000000; padding: 1rem;\">Title</div>`;\r\n                searchedProjectDetails += `<div class=\"col-xs-6\" style=\"color: #000000; text-transform: capitalize; padding: 1rem;\">${dbQueryResult.docs[0].TITLE}</div>`;\r\n                searchedProjectDetails += `<div class=\"col-xs-6\" style=\"font-weight: bold; color: #000000; padding: 1rem;\">Contractor</div>`;\r\n                searchedProjectDetails += `<div class=\"col-xs-6\" style=\"color: #000000; text-transform: capitalize; padding: 1rem;\">${dbQueryResult.docs[0].CONTRACTOR}</div>`;\r\n                searchedProjectDetails += `<div class=\"col-xs-6\" style=\"font-weight: bold; color: #000000; padding: 1rem;\">Contract Sum</div>`;\r\n                searchedProjectDetails += `<div class=\"col-xs-6\" style=\"color: #000000; text-transform: capitalize; padding: 1rem;\">${kendo.toString(kendo.parseFloat(dbQueryResult.docs[0].CONTRACTSUM), \"n2\")}</div>`;\r\n\r\n                // attach the generated project details to the page\r\n                $('#search-project-page #search-project-details').html(searchedProjectDetails);\r\n\r\n                // hide the page preloader\r\n                $('#search-project-page .page-preloader').css(\"display\", \"none\");\r\n\r\n                // perform actions to reveal result\r\n                kendo.fx($('#search-project-page #search-project-details')).fade(\"in\").duration(550).play();\r\n                await Promise.\r\n                resolve(kendo.fx($('#search-project-page ons-bottom-toolbar')).slideIn(\"up\").duration(600).play());\r\n                $('#search-project-page ons-bottom-toolbar').css(\"display\", \"block\");\r\n            }\r\n            catch(err){\r\n                // hide the page preloader\r\n                $('#search-project-page .page-preloader').css(\"display\", \"none\");\r\n                // inform user that no project was found\r\n                $('#search-project-page .no-project-found').css(\"display\", \"block\");\r\n                // hide the previous project details being displayed\r\n                $('#search-project-page #search-project-details').css(\"display\", \"none\");\r\n                // hide the project data download error\r\n                $('#search-project-page .project-data-download-error').css(\"display\", \"none\");\r\n                // hide the bottom toolbar of the page\r\n                $('#search-project-page ons-bottom-toolbar').css(\"display\", \"none\");\r\n            }\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        backButtonClicked(){\r\n\r\n            // check if the side menu is open\r\n            if($('ons-splitter').get(0).right.isOpen){ // side menu open, so close it\r\n                $('ons-splitter').get(0).right.close();\r\n                return; // exit the method\r\n            }\r\n\r\n            ons.notification.confirm('Do you want to close the app?', {title: 'Exit App',\r\n                buttonLabels: ['No', 'Yes'], modifier: 'utopiasoftware-alert-dialog'}) // Ask for confirmation\r\n                .then(function(index) {\r\n                    if (index === 1) { // OK button\r\n                        navigator.app.exitApp(); // Close the app\r\n                    }\r\n                });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the 'Proceed' button is clicked\r\n         */\r\n        proceedButtonClicked(){\r\n\r\n            // move to the project evaluation page. Also pass along the currently chosen project object\r\n            $('#app-main-navigator').get(0).pushPage(\"project-evaluation-page.html\", {animation: \"lift-md\",\r\n            data: {projectData: utopiasoftware[utopiasoftware_app_namespace].controller.searchProjectPageViewModel.\r\n                    currentlySelectedProject}});\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the Project Evaluation page\r\n     */\r\n    projectEvaluationPageViewModel: {\r\n\r\n        /**\r\n         * used to hold the parsley form validation object for the page\r\n         */\r\n        formValidator: null,\r\n\r\n        /**\r\n         * used to hold the Viewer object used to display the evaluations snapshots\r\n         */\r\n        pictureViewer: null,\r\n\r\n        /**\r\n         * used to hold the retrieved project milestones\r\n         */\r\n        projectMilestones: null,\r\n\r\n        /**\r\n         * holds the project picturesUrls array.\r\n         * the 1st element of the array is ALWAYS null with subsequent elements holds the url for the pictures\r\n         */\r\n        projectPicturesUrls: [null],\r\n\r\n        /**\r\n         * holds the Google Map object used to display the current location of the project being evaluated\r\n         */\r\n        projectEvaluationMap: null,\r\n\r\n        /**\r\n         * holds the Geo location object for the project. The object is gotten from the device's GPS\r\n         */\r\n        projectGeoPosition: null,\r\n\r\n        /**\r\n         * this property indicates if the picture viewer widget is being displayed or not\r\n         */\r\n        isPictureViewerShowing: false,\r\n\r\n        /**\r\n         * property indicates if project evaluation has commenced on the selected/chosen project.\r\n         * Project evaluation is marked has 'started' if any of the initial states for evaluation is changed by the user\r\n         */\r\n        hasProjectEvaluationStarted: false,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false\r\n                || !ej || !Viewer){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                ej.base.enableRipple(true);\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.projectEvaluationPageViewModel.backButtonClicked;\r\n\r\n                // show the page preloader\r\n                $('#project-evaluation-page .page-preloader').css(\"display\", \"block\");\r\n                // hide the items that are not to be displayed\r\n                $('#project-evaluation-page .project-evaluation-instructions, ' +\r\n                    '#project-evaluation-page .no-milestone-found').css(\"display\", \"none\");\r\n\r\n                // pick the project data object for which milestones are to be evaluated\r\n                let projectData = $('#app-main-navigator').get(0).topPage.data.projectData;\r\n\r\n                try{\r\n                    // search the app database for milestones using the project id provided\r\n                    let dbQueryResult = await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.find({\r\n                        selector: {\r\n                            \"BOQID\": {\r\n                                \"$exists\": true\r\n                            },\r\n                            \"TYPE\": {\r\n                                \"$eq\": \"BOQ\"\r\n                            },\r\n                            \"PROJECTID\": {\r\n                                \"$eq\": projectData.PROJECTID\r\n                            }\r\n                        },\r\n                        use_index: [\"ptracker-index-designdoc\", \"FIND_BOQ_BY_ID_INDEX\"]\r\n\r\n                    });\r\n\r\n                    // check if any milestones were returned\r\n                    if(dbQueryResult.docs.length == 0) { // no milestones were found for the project\r\n                        throw \"error\"; // throw an error\r\n                    }\r\n\r\n                    // if the code gets to this point, milestones were returned\r\n                    // sort the returned milestones array\r\n                    dbQueryResult.docs.sort(function(firstElem, secondElement){\r\n                        return (window.parseInt(firstElem.BOQID) - window.parseInt(secondElement.BOQID));\r\n                    });\r\n\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectMilestones = dbQueryResult.docs; // update the current project milestones\r\n\r\n                    // get all the previously approved and cached project evaluations belonging to the provided project id\r\n                    let projectEvaluationsQueryResult = await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.find({\r\n                        selector: {\r\n                            \"PROJECTID\": {\r\n                                \"$eq\": projectData.PROJECTID\r\n                            },\r\n                            \"TYPE\": {\r\n                                \"$eq\": \"project evaluations\"\r\n                            }\r\n                        },\r\n                        use_index: [\"ptracker-index-designdoc\", \"FIND_PROJECT_BY_ID_INDEX\"]\r\n\r\n                    });\r\n\r\n                    // create the evaluation carousel item based on the milestones retrieved\r\n                    let carouselContent = \"\";\r\n                    for(let index = 0; index < dbQueryResult.docs.length; index++)\r\n                    {\r\n                        carouselContent = `\r\n                        <ons-carousel-item style=\"overflow-y: auto\">\r\n                            <ons-card>\r\n                                <div style=\"font-size: 1.2em\">\r\n                                    ${dbQueryResult.docs[index].CATEGORY}\r\n                                </div>\r\n                                <div class=\"project-evaluation-slider\"></div>\r\n                                <div class=\"project-evaluation-milestone-amount\" style=\"margin-top: 1em; font-size: 1em;\">\r\n                                    <span style=\"display: inline-block; font-style: italic; margin-right: 1em;\">Milestone Value </span> \r\n                                    ${kendo.toString(kendo.parseFloat(dbQueryResult.docs[index].AMOUNT), \"n2\")}\r\n                                </div>\r\n                                <div class=\"project-evaluation-milestone-current-value\" style=\"font-size: 1em;\">\r\n                                    <span style=\"display: inline-block; font-style: italic; margin-right: 1em;\">Value Completed </span> \r\n                                    ${kendo.toString(kendo.parseFloat(0), \"n2\")}\r\n                                </div>\r\n                            </ons-card>\r\n                        </ons-carousel-item>`;\r\n                        $('#project-evaluation-page #project-evaluation-carousel').append(carouselContent);\r\n                    } // end of for loop\r\n\r\n                    // append the carousel content used for displaying evaluation pictures\r\n                    carouselContent = `\r\n                    <ons-carousel-item style=\"overflow-y: scroll\">\r\n                        <div class=\"row project-evaluation-images-container\" style=\"margin-top: 1.5em;\">\r\n                            <div class=\"col-xs-6\" style=\"padding: 0.5em; position: relative\">\r\n                                <div style=\"position: absolute; top: 5px;\">\r\n                                    <ons-speed-dial id=\"project-evaluation-picture-speed-dial-1\" direction=\"down\">\r\n                                        <ons-fab modifier=\"utopiasoftware-pic-capture-speed-dial\"\r\n                                                 class=\"utopiasoftware-pic-capture-speed-dial\" \r\n                                                 onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                                 projectEvaluationPageViewModel.pictureSpeedDialClicked(1)\">\r\n                                            <ons-icon icon=\"md-image-o\"></ons-icon>\r\n                                        </ons-fab>\r\n                                        <ons-speed-dial-item modifier=\"utopiasoftware-pic-capture-speed-dial-item\"\r\n                                                             class=\"utopiasoftware-pic-capture-speed-dial\" \r\n                                                             onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                                 projectEvaluationPageViewModel.pictureCaptureButtonClicked(1)\">\r\n                                            <ons-icon icon=\"md-camera\"></ons-icon>\r\n                                        </ons-speed-dial-item>\r\n                                        <ons-speed-dial-item modifier=\"utopiasoftware-pic-capture-speed-dial-item\"\r\n                                                             class=\"utopiasoftware-pic-capture-speed-dial\" \r\n                                                             onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                                 projectEvaluationPageViewModel.deletePictureButtonClicked(1)\">\r\n                                            <ons-icon icon=\"md-delete\"></ons-icon>\r\n                                        </ons-speed-dial-item>\r\n                                    </ons-speed-dial>\r\n                                </div>\r\n                                <img id=\"project-evaluation-picture-1\" src=\"css/app-images/project-evaluation-photo-placeholder.png\" style=\"width: 100%; border: 2px darkgray groove\" alt=\"Picture 1\">\r\n                            </div>\r\n                            <div class=\"col-xs-6\" style=\"padding: 0.5em; position: relative\">\r\n                                <div style=\"position: absolute; top: 5px;\">\r\n                                    <ons-speed-dial id=\"project-evaluation-picture-speed-dial-2\" direction=\"down\">\r\n                                        <ons-fab modifier=\"utopiasoftware-pic-capture-speed-dial\"\r\n                                                 class=\"utopiasoftware-pic-capture-speed-dial\" \r\n                                                 onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                                 projectEvaluationPageViewModel.pictureSpeedDialClicked(2)\">\r\n                                            <ons-icon icon=\"md-image-o\"></ons-icon>\r\n                                        </ons-fab>\r\n                                        <ons-speed-dial-item modifier=\"utopiasoftware-pic-capture-speed-dial-item\"\r\n                                                             class=\"utopiasoftware-pic-capture-speed-dial\" \r\n                                                             onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                                 projectEvaluationPageViewModel.pictureCaptureButtonClicked(2)\">\r\n                                            <ons-icon icon=\"md-camera\"></ons-icon>\r\n                                        </ons-speed-dial-item>\r\n                                        <ons-speed-dial-item modifier=\"utopiasoftware-pic-capture-speed-dial-item\"\r\n                                                             class=\"utopiasoftware-pic-capture-speed-dial\" \r\n                                                             onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                                 projectEvaluationPageViewModel.deletePictureButtonClicked(2)\">\r\n                                            <ons-icon icon=\"md-delete\"></ons-icon>\r\n                                        </ons-speed-dial-item>\r\n                                    </ons-speed-dial>\r\n                                </div>\r\n                                <img id=\"project-evaluation-picture-2\" src=\"css/app-images/project-evaluation-photo-placeholder.png\" style=\"width: 100%; border: 2px darkgray groove\" alt=\"Picture 2\">\r\n                            </div>\r\n                            <div class=\"col-xs-offset-3 col-xs-6\" style=\"padding: 0.5em; position: relative\">\r\n                                <div style=\"position: absolute; top: 5px;\">\r\n                                    <ons-speed-dial id=\"project-evaluation-picture-speed-dial-3\" direction=\"down\">\r\n                                        <ons-fab modifier=\"utopiasoftware-pic-capture-speed-dial\"\r\n                                                 class=\"utopiasoftware-pic-capture-speed-dial\" \r\n                                                 onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                                 projectEvaluationPageViewModel.pictureSpeedDialClicked(3)\">\r\n                                            <ons-icon icon=\"md-image-o\"></ons-icon>\r\n                                        </ons-fab>\r\n                                        <ons-speed-dial-item modifier=\"utopiasoftware-pic-capture-speed-dial-item\"\r\n                                                             class=\"utopiasoftware-pic-capture-speed-dial\" \r\n                                                             onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                                 projectEvaluationPageViewModel.pictureCaptureButtonClicked(3)\">\r\n                                            <ons-icon icon=\"md-camera\"></ons-icon>\r\n                                        </ons-speed-dial-item>\r\n                                        <ons-speed-dial-item modifier=\"utopiasoftware-pic-capture-speed-dial-item\"\r\n                                                             class=\"utopiasoftware-pic-capture-speed-dial\" \r\n                                                             onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                                 projectEvaluationPageViewModel.deletePictureButtonClicked(3)\">\r\n                                            <ons-icon icon=\"md-delete\"></ons-icon>\r\n                                        </ons-speed-dial-item>\r\n                                    </ons-speed-dial>\r\n                                </div>\r\n                                <img id=\"project-evaluation-picture-3\" src=\"css/app-images/project-evaluation-photo-placeholder.png\" style=\"width: 100%; border: 2px darkgray groove\" alt=\"Picture 3\">\r\n                            </div>\r\n                        </div>\r\n                    </ons-carousel-item>`;\r\n                    // append the generated carousel content to the project evaluation carousel\r\n                    $('#project-evaluation-page #project-evaluation-carousel').append(carouselContent);\r\n\r\n                    // append the carousel content used for displaying project location on a map\r\n                    carouselContent = `\r\n                    <ons-carousel-item style=\"position: relative;\">\r\n                        <div id=\"project-evaluation-map\" style=\"position: absolute; top: 0; left: 0; width: 100%; \r\n                            height: 100%; bottom: 0; border: 1px #00d5c3 solid; text-align: center;\">\r\n                            <ons-button style=\"background-color: #3f51b5; position: relative; top: 3px;\r\n                            display: inline-block;\"\r\n                            onclick=\"utopiasoftware[utopiasoftware_app_namespace].\r\n                            controller.projectEvaluationPageViewModel.getProjectGeoLocationButtonClicked()\">Get Project Location</ons-button>\r\n                            <div id=\"project-evaluation-gps-progress\" \r\n                            style=\"position: relative; display: none; top: 65px; text-align: center\">\r\n                                <ons-progress-circular indeterminate modifier=\"project-gps-location-progress\"></ons-progress-circular>\r\n                            </div>\r\n                            <div id=\"project-evaluation-gps-location-tag\" style=\"color: #ffffff; \r\n                            font-weight: bold; font-size: 0.8em; text-transform: uppercase; \r\n                            background-color: rgba(0,213,195,0.80); padding: 0.6em; border-radius: 10px; \r\n                            width: 80%; position: absolute; bottom: 2px; display: inline-block; \r\n                            left: 10%; \r\n                            overflow: hidden; text-overflow: ellipsis; white-space: nowrap;\">Location:</div>\r\n                        </div>\r\n                    </ons-carousel-item>`;\r\n                    // append the generated carousel content to the project evaluation carousel\r\n                    $('#project-evaluation-page #project-evaluation-carousel').append(carouselContent);\r\n\r\n                    // append the carousel content used for displaying project remarks textarea\r\n                    carouselContent = `\r\n                    <ons-carousel-item style=\"overflow-y: auto\">\r\n                        <textarea id=\"project-evaluation-remarks\" spellcheck=\"true\" \r\n                        style=\"width: 80%; height: 4em; margin-left: 10%;\r\n                        margin-right: 10%; border: none; border-bottom: 2px #00D5C3 solid; \r\n                        border-left: 2px #00D5C3 solid; border-right: 2px #00D5C3 solid; \r\n                        background-color: transparent;\"></textarea>\r\n                    </ons-carousel-item>`;\r\n                    // append the generated carousel content to the project evaluation carousel\r\n                    $('#project-evaluation-page #project-evaluation-carousel').append(carouselContent);\r\n\r\n                    // create the project evaluation slider elements\r\n                    $('#project-evaluation-page .project-evaluation-slider').\r\n                    each(function(index, element){\r\n\r\n                        element._ptracker_index = index; //  store the index position of the element within the collection on the element itself\r\n                        let previousSliderValue = null; // holds the slider value gotten from previously saved evaluations\r\n\r\n                        if(! projectEvaluationsQueryResult.docs[0]){\r\n                            previousSliderValue = null; // if there are no saved approved project evaluations, then set value to null\r\n                        }\r\n                        else{ // there are saved/cached approved project evaluations\r\n                            // get the saved and approved milestone score from the approved project evaluations\r\n                            previousSliderValue = projectEvaluationsQueryResult.docs[0].EVALUATIONS.\r\n                            find(function(currentValue, index2){\r\n                                // check if any of the approved evaluation reports are for any of the milestones to be currently viewed\r\n                                if(window.parseInt(currentValue.milestoneId) ===\r\n                                    window.parseInt(dbQueryResult.docs[element._ptracker_index].BOQID)){\r\n                                    return true; // this approved evaluation reports are for the currently viewed milestone\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                        if(previousSliderValue){ // if previously slider value is an object, get the previous evaluation score\r\n                            previousSliderValue = window.parseInt(previousSliderValue.milestoneScore); // update to the previous score\r\n                        }\r\n                        // create each milestone evaluation slider\r\n                        let aSlider = new ej.inputs.Slider({\r\n                            min: 0,\r\n                            max: 100,\r\n                            value: previousSliderValue || 0,\r\n                            limits: {\r\n                                enabled: true,\r\n                                minStart: previousSliderValue || 0,\r\n                                minEnd: 100\r\n                            },\r\n                            step: 1,\r\n                            orientation: 'Horizontal',\r\n                            type: 'MinRange',\r\n                            created: function(){\r\n                                // write the value on the slider handle element\r\n                                $('.e-handle', element).text(this.value);\r\n                                // update the milestone current value\r\n                                $('.project-evaluation-milestone-current-value', $(element).closest('ons-card'))\r\n                                    .html(`<span style=\"display: inline-block; font-style: italic; margin-right: 1em;\">Value Completed </span> \r\n                                    ${kendo.toString(kendo.parseFloat((this.value / 100) * kendo.parseFloat(dbQueryResult.docs[element._ptracker_index].AMOUNT)), \"n2\")}`);\r\n                            },\r\n                            change: function(changeEvent){\r\n                                $('.e-handle', element).text(changeEvent.value);\r\n                                // update the project evaluation started flag to indicate evaluation has started\r\n                                utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                    projectEvaluationPageViewModel.hasProjectEvaluationStarted = true;\r\n                            },\r\n                            changed: function(changedEvent){\r\n                                // update the milestone current value based on changes in the slider\r\n                                $('.project-evaluation-milestone-current-value', $(element).closest('ons-card'))\r\n                                    .html(`<span style=\"display: inline-block; font-style: italic; margin-right: 1em;\">Value Completed </span> \r\n                                    ${kendo.toString(kendo.parseFloat((changedEvent.value / 100) * kendo.parseFloat(dbQueryResult.docs[element._ptracker_index].AMOUNT)), \"n2\")}`);\r\n                            }\r\n                        });\r\n                        aSlider.appendTo(element);\r\n                        element._ptracker_slider = aSlider;\r\n                    });\r\n\r\n                    // create the Viewer widget used to view the project evaluation photos\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.pictureViewer =\r\n                        new Viewer($('#project-evaluation-page .project-evaluation-images-container').get(0),\r\n                            {inline: false,\r\n                                toolbar: {\r\n                                    prev: {\r\n                                        show: true,\r\n                                        size: 'large',\r\n                                    },\r\n                                    next: {\r\n                                        show: true,\r\n                                        size: 'large',\r\n                                    },\r\n                                    zoomIn: {\r\n                                        show: true,\r\n                                        size: 'large',\r\n                                    },\r\n                                    zoomOut: {\r\n                                        show: true,\r\n                                        size: 'large',\r\n                                    },\r\n                                    oneToOne: {\r\n                                        show: true,\r\n                                        size: 'large',\r\n                                    },\r\n                                    reset: {\r\n                                        show: true,\r\n                                        size: 'large',\r\n                                    },\r\n                                    play: {\r\n                                        show: false,\r\n                                        size: 'large',\r\n                                    },\r\n                                    rotateLeft: {\r\n                                        show: false,\r\n                                        size: 'large',\r\n                                    },\r\n                                    rotateRight: {\r\n                                        show: false,\r\n                                        size: 'large',\r\n                                    },\r\n                                    flipHorizontal: {\r\n                                        show: false,\r\n                                        size: 'large',\r\n                                    },\r\n                                    flipVertical: {\r\n                                        show: false,\r\n                                        size: 'large',\r\n                                    }\r\n                                },\r\n                                backdrop: 'static',\r\n                                shown: function(){ // event is triggered when Picture Viewer is shown\r\n                                    // indicate that the picture viewer widget is showing\r\n                                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                        projectEvaluationPageViewModel.isPictureViewerShowing = true;\r\n                                },\r\n                                hidden: function(){ // event is triggered when Picture Viewer is hidden\r\n                                    // indicate that the picture viewer widget is hidden\r\n                                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                        projectEvaluationPageViewModel.isPictureViewerShowing = false;\r\n                                }});\r\n\r\n                    // hide the page preloader\r\n                    $('#project-evaluation-page .page-preloader').css(\"display\", \"none\");\r\n                    // show the items that are to be displayed\r\n                    $('#project-evaluation-page .project-evaluation-instructions, #project-evaluation-page .content').\r\n                    css(\"display\", \"block\");\r\n                    $('#project-evaluation-page #project-evaluation-next-button').\r\n                    css(\"display\", \"inline-block\");\r\n                }\r\n                catch (e) {\r\n                    // hide the page preloader\r\n                    $('#project-evaluation-page .page-preloader').css(\"display\", \"none\");\r\n                    // hide the items that are not to be displayed\r\n                    $('#project-evaluation-page .project-evaluation-instructions, #project-evaluation-page .content').\r\n                    css(\"display\", \"none\");\r\n                    $('#project-evaluation-page #project-evaluation-prev-button, #project-evaluation-page #project-evaluation-next-button').\r\n                    css(\"display\", \"none\");\r\n                    // display the message to inform user that there are no milestones available for the project\r\n                    $('#project-evaluation-page .no-milestone-found').css(\"display\", \"block\");\r\n                }\r\n                finally{\r\n                    // hide the loader\r\n                    $('#loader-modal').get(0).hide();\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // adjust the window/view-port settings for when the soft keyboard is displayed\r\n            window.SoftInputMode.set('adjustPan'); // let the window/view-port 'pan' when the soft keyboard is displayed\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: function(){\r\n            // adjust the window/view-port settings for when the soft keyboard is displayed\r\n            // window.SoftInputMode.set('adjustResize'); // let the view 'resize' when the soft keyboard is displayed\r\n\r\n            // REMOVE the app background transparency, map np longer showing\r\n            $('html, body').removeClass('utopiasoftware-transparent');\r\n\r\n            // check if Map already exists and is ready to be used\r\n            if(utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.projectEvaluationMap &&\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.projectEvaluationMap._ptracker_isMapReady === true){\r\n            // hide the map object\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectEvaluationMap.setVisible(false);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n            // destroy the pictures Viewer widget instance\r\n            if(utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.pictureViewer){\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.pictureViewer.destroy();\r\n            }\r\n            // reset other object properties\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectMilestones = null;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectPicturesUrls = [null];\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.hasProjectEvaluationStarted = false;\r\n\r\n            // check if Map already exists and is ready to be used\r\n            if(utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.projectEvaluationMap &&\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.projectEvaluationMap._ptracker_isMapReady === true){\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectEvaluationMap.remove();\r\n            }\r\n\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectEvaluationMap = null;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectGeoPosition = null;\r\n\r\n            // destroy slider widgets created\r\n            $('#project-evaluation-page .project-evaluation-slider').\r\n            each(function(index, element){\r\n                // destroy the slider widget attached to this element\r\n                element._ptracker_slider.destroy();\r\n                element._ptracker_slider = null;\r\n            });\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        async backButtonClicked(){\r\n\r\n            // check if the side menu is open\r\n            if($('ons-splitter').get(0).right.isOpen){ // side menu open, so close it\r\n                $('ons-splitter').get(0).right.close();\r\n                return; // exit the method\r\n            }\r\n\r\n            // check if the Picture Viewer widget is showing\r\n            if(utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.isPictureViewerShowing === true){ // Picture Viewer is showing\r\n                // hide it\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.pictureViewer.hide();\r\n                return; // exit\r\n            }\r\n\r\n            // check if project evaluation has already started\r\n           if(// update the project evaluation started flag to indicate evaluation has started\r\n               utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                   projectEvaluationPageViewModel.hasProjectEvaluationStarted === true){ // evaluation has started\r\n\r\n               // inform user that leaving this page will mean that current evaluation data is lost. does user want to leave?\r\n               let leaveProjectEvaluation = await ons.notification.confirm('',\r\n                   {title: '<ons-icon icon=\"md-alert-triangle\" style=\"color: #3f51b5\" size=\"33px\"></ons-icon> <span style=\"color: #3f51b5; display: inline-block; margin-left: 1em;\">Warning</span>',\r\n                       messageHTML: `You have NOT completed the evaluation. If you leave now, all evaluation data will be cancelled.<br><br> Do you want to leave the project evaluation?`,\r\n                       buttonLabels: ['No', 'Yes'], modifier: 'utopiasoftware-alert-dialog'});\r\n\r\n               if(leaveProjectEvaluation == 0){ // user does not want to project evaluation, so exit method now\r\n                   return; // exit method\r\n               }\r\n           }\r\n\r\n            // move to the project evaluation page\r\n            $('#app-main-navigator').get(0).popPage();\r\n        },\r\n\r\n        /**\r\n         * method is used to control the behaviour of the picture speed dials\r\n         *\r\n         * @param pictureNumber {Integer} holds the number/position of the picture.\r\n         * The position of pictures starts from 1 (i.e. 1-based counting)\r\n         */\r\n        pictureSpeedDialClicked(pictureNumber){\r\n\r\n            // handler conditions for each picture speed-dial\r\n            switch(pictureNumber){ // determine what to do based on the picture number value\r\n\r\n                case 1:\r\n                    // check if the speed-dial widget that was clicked is currently opened\r\n                    if(!$('#project-evaluation-page #project-evaluation-picture-speed-dial-1').get(0).isOpen()){ // speed-dial is open\r\n                        // close all other picture speed-dials\r\n                        $('#project-evaluation-page #project-evaluation-picture-speed-dial-2').get(0).hideItems();\r\n                        $('#project-evaluation-page #project-evaluation-picture-speed-dial-3').get(0).hideItems();\r\n                    }\r\n                    break;\r\n\r\n                case 2:\r\n                    if(!$('#project-evaluation-page #project-evaluation-picture-speed-dial-2').get(0).isOpen()){ // speed-dial is open\r\n                        // close all other picture speed-dials\r\n                        $('#project-evaluation-page #project-evaluation-picture-speed-dial-1').get(0).hideItems();\r\n                        $('#project-evaluation-page #project-evaluation-picture-speed-dial-3').get(0).hideItems();\r\n                    }\r\n                    break;\r\n\r\n                case 3:\r\n                    if(!$('#project-evaluation-page #project-evaluation-picture-speed-dial-3').get(0).isOpen()){ // speed-dial is open\r\n                        // close all other picture speed-dials\r\n                        $('#project-evaluation-page #project-evaluation-picture-speed-dial-1').get(0).hideItems();\r\n                        $('#project-evaluation-page #project-evaluation-picture-speed-dial-2').get(0).hideItems();\r\n                    }\r\n                    break;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to capture project evaluation photos with the user's camera\r\n         *\r\n         * @param pictureNumber {Integer} holds the number/position of the picture.\r\n         * The position of pictures starts from 1 (i.e. 1-based counting)\r\n         */\r\n        async pictureCaptureButtonClicked(pictureNumber){\r\n\r\n            var permissionStatuses = null; // holds the statuses of the runtime permissions requested\r\n\r\n            try{\r\n                // request runtime permissions to use device's camera\r\n                permissionStatuses =  await new Promise(function(resolve, reject){\r\n                    cordova.plugins.diagnostic.requestRuntimePermissions(resolve, reject,[\r\n                        cordova.plugins.diagnostic.permission.CAMERA\r\n                    ]);\r\n                });\r\n\r\n                // check if the user has given permission to use the device's camera\r\n                if((!permissionStatuses) ||\r\n                    permissionStatuses[cordova.plugins.diagnostic.permission.CAMERA] !==\r\n                    cordova.plugins.diagnostic.permissionStatus.GRANTED){\r\n                    throw \"error - no runtime permissions\";\r\n                }\r\n\r\n                // disable screen orientation lock\r\n                screen.orientation.unlock();\r\n\r\n                // open the device camera app and capture a photo\r\n                let imageUrl = await new Promise(function(resolve, reject){\r\n                    navigator.camera.getPicture(resolve, reject, {\r\n                        quality: 70,\r\n                        destinationType: Camera.DestinationType.FILE_URI,\r\n                        sourceType: Camera.PictureSourceType.CAMERA,\r\n                        allowEdit: false,\r\n                        encodingType: Camera.EncodingType.JPEG,\r\n                        correctOrientation: false,\r\n                        saveToPhotoAlbum: false,\r\n                        cameraDirection: Camera.Direction.BACK\r\n                    });\r\n                });\r\n\r\n                // check what picture number the camera was used for and then display it\r\n                switch(pictureNumber){\r\n                    case 1:\r\n                        // store the image url in the correct picturesUrls array index\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                            projectEvaluationPageViewModel.projectPicturesUrls[pictureNumber] = imageUrl;\r\n                        // update the image src for the correct project picture, so that picture can be displayed\r\n                        $('#project-evaluation-page #project-evaluation-picture-1').attr(\"src\", imageUrl);\r\n                        break;\r\n\r\n                    case 2:\r\n                        // store the image url in the correct picturesUrls array index\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                            projectEvaluationPageViewModel.projectPicturesUrls[pictureNumber] = imageUrl;\r\n                        // update the image src for the correct project picture, so that picture can be displayed\r\n                        $('#project-evaluation-page #project-evaluation-picture-2').attr(\"src\", imageUrl);\r\n                        break;\r\n\r\n                    case 3:\r\n                        // store the image url in the correct picturesUrls array index\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                            projectEvaluationPageViewModel.projectPicturesUrls[pictureNumber] = imageUrl;\r\n                        // update the image src for the correct project picture, so that picture can be displayed\r\n                        $('#project-evaluation-page #project-evaluation-picture-3').attr(\"src\", imageUrl);\r\n                        break;\r\n                }\r\n\r\n                // update the project evaluation started flag to indicate evaluation has started\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.hasProjectEvaluationStarted = true;\r\n\r\n                // update the picture viewer widget\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.pictureViewer.update();\r\n            }\r\n            catch(err){\r\n                // inform the user of the error\r\n                window.plugins.toast.showWithOptions({\r\n                    message: \"Photo Capture Failed - \" + err,\r\n                    duration: 4000,\r\n                    position: \"top\",\r\n                    styling: {\r\n                        opacity: 1,\r\n                        backgroundColor: '#ff0000', //red\r\n                        textColor: '#FFFFFF',\r\n                        textSize: 14\r\n                    }\r\n                }, function(toastEvent){\r\n                    if(toastEvent && toastEvent.event == \"touch\"){ // user tapped the toast, so hide toast immediately\r\n                        window.plugins.toast.hide();\r\n                    }\r\n                });\r\n            }\r\n            finally {\r\n                // lock the device orientation back to 'portrait'\r\n                screen.orientation.lock('portrait');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is used to delete/remove project evaluation photos from the collection and display\r\n         *\r\n         * @param pictureNumber {Integer} holds the number/position of the picture.\r\n         * The position of pictures starts from 1 (i.e. 1-based counting)\r\n         */\r\n        async deletePictureButtonClicked(pictureNumber){\r\n\r\n            // check if the selected photo has been changed from the default (no photo)\r\n            if(! utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectPicturesUrls[pictureNumber]){ // the photo is in the default\r\n                // since the photo is in the default, there is no need to delete photo. so exit\r\n                return; // exit\r\n            }\r\n\r\n            // ask user to confirm photo delete\r\n            let deletePhoto = await ons.notification.confirm('Do you want to delete the photo?',\r\n                {title: '<ons-icon icon=\"md-delete\" style=\"color: #3f51b5\" size=\"33px\"></ons-icon> <span style=\"color: #3f51b5; display: inline-block; margin-left: 1em;\">Delete Photo</span>',\r\n                buttonLabels: ['No', 'Yes'], modifier: 'utopiasoftware-alert-dialog'});\r\n\r\n            if(deletePhoto == 0){ // user does not want to delete photo, so exit method now\r\n                return; // exit method\r\n            }\r\n\r\n            // remove the image url in the correct picturesUrls array index\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectPicturesUrls[pictureNumber] = null;\r\n            // update the image src to the \"no photo\" display\r\n            $('#project-evaluation-page #project-evaluation-picture-' + pictureNumber).\r\n            attr(\"src\", \"css/app-images/project-evaluation-photo-placeholder.png\");\r\n\r\n            // update the picture viewer widget\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n            projectEvaluationPageViewModel.pictureViewer.update();\r\n        },\r\n\r\n        /**\r\n         * method is used to retrieve the project location by using the current GPS location of the device\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async getProjectGeoLocationButtonClicked(){\r\n\r\n            var permissionStatuses = null; // holds the statuses of the runtime permissions requested\r\n\r\n            try{\r\n                // request runtime permissions to use device's GPS\r\n                permissionStatuses =  await new Promise(function(resolve, reject){\r\n                    cordova.plugins.diagnostic.requestRuntimePermissions(resolve, reject,[\r\n                        cordova.plugins.diagnostic.permission.ACCESS_FINE_LOCATION\r\n                    ]);\r\n                });\r\n\r\n                // check if the user has given permission to use the device's GPS\r\n                if((!permissionStatuses) ||\r\n                    permissionStatuses[cordova.plugins.diagnostic.permission.ACCESS_FINE_LOCATION] !==\r\n                    cordova.plugins.diagnostic.permissionStatus.GRANTED){\r\n                    throw \"error - no location permission\";\r\n                }\r\n\r\n                // check if the device GPS is enabled\r\n                let isGPSEnabled = await new Promise(function(resolve, reject){\r\n                    cordova.plugins.diagnostic.isGpsLocationEnabled(resolve, reject);\r\n                });\r\n\r\n                if(isGPSEnabled === false){ // GPS NOT ENABLED\r\n                    // inform user to enable location on device\r\n                    await ons.notification.alert('',\r\n                        {title: '<ons-icon icon=\"md-pin\" style=\"color: #3f51b5\" size=\"33px\"></ons-icon> <span style=\"color: #3f51b5; display: inline-block; margin-left: 1em;\">Location Service</span>',\r\n                            messageHTML: `You need to enable you device location service to capture the project location. <br>Switch to Location Settings or enable the location service directly?`,\r\n                            buttonLabels: ['Proceed'], modifier: 'utopiasoftware-alert-dialog'});\r\n\r\n                    // turn on the user's location services automatically\r\n                    isGPSEnabled = await new Promise(function(resolve, reject){\r\n                        cordova.plugins.locationAccuracy.request(function(){resolve(true)}, function(){resolve(false)},\r\n                            cordova.plugins.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY);\r\n                    });\r\n                    if(isGPSEnabled === false){ // GPS IS STILL NOT ENABLED\r\n                        // switch to the Location Settings screen, so user can manually enable Location Services\r\n                        cordova.plugins.diagnostic.switchToLocationSettings();\r\n\r\n                        return; // exit method\r\n                    }\r\n                }\r\n\r\n                // if method get here, GPS has been successfully enabled and app has authorisation to use it\r\n                // show the circular progress to indicate app has started working on getting user gps\r\n                $('#project-evaluation-page #project-evaluation-gps-progress').css(\"display\", \"block\");\r\n                // get project's current location using device's gps geolocation\r\n                let geoPosition = await new Promise(function(resolve, reject){\r\n                    navigator.geolocation.getCurrentPosition(resolve,\r\n                        reject,\r\n                        {enableHighAccuracy: true, timeout: 300000, maximumAge: 5000});\r\n                });\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.projectGeoPosition = geoPosition; // assign the retrieved geo position object to its appropriate object property\r\n\r\n                // flag that progress evaluation has started\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.hasProjectEvaluationStarted = true;\r\n\r\n                // make the app background transparent, so the map can show\r\n                $('html, body').addClass('utopiasoftware-transparent');\r\n\r\n                // update the location tag info displayed at the bottom of screen\r\n                $('#project-evaluation-page #project-evaluation-gps-location-tag').\r\n                    html(`Location: ${geoPosition.coords.latitude},${geoPosition.coords.longitude}`);\r\n\r\n                // check if Map already exists and is ready to be used\r\n                if(utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.projectEvaluationMap &&\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectEvaluationMap._ptracker_isMapReady === true){\r\n\r\n                    // map has previously been created and is ready for use\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectEvaluationMap.setVisible(true); // make map visible\r\n\r\n                    // hide circular progress display\r\n                    $('#project-evaluation-page #project-evaluation-gps-progress').css(\"display\", \"none\");\r\n\r\n                    // animate the map camera\r\n                    await new Promise(function(resolve, reject){\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectEvaluationMap.animateCamera({\r\n                            target: {lat: geoPosition.coords.latitude,\r\n                                lng: geoPosition.coords.longitude}\r\n                        }, function(){resolve();});\r\n                    });\r\n\r\n                    // clear all previous content displayed on the map\r\n                    await new Promise(function(resolve, reject){\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                            projectEvaluationPageViewModel.projectEvaluationMap.clear(function(){resolve()});\r\n                    });\r\n\r\n                    let projectMarker = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.projectEvaluationMap.addMarker({\r\n                        position: {\r\n                            \"lat\": utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                projectEvaluationPageViewModel.projectGeoPosition.coords.latitude,\r\n                            \"lng\": utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                projectEvaluationPageViewModel.projectGeoPosition.coords.longitude\r\n                        },\r\n                        icon: '#00D5C3',\r\n                        'title': $('#app-main-navigator').get(0).topPage.data.projectData.TITLE.toLocaleUpperCase(),\r\n                        animation: plugin.google.maps.Animation.BOUNCE\r\n                    });\r\n                    // display marker info window\r\n                    projectMarker.showInfoWindow();\r\n\r\n                    return; // exit method\r\n                }\r\n\r\n                // generate the geo map for the project evaluation\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.projectEvaluationMap =\r\n                    plugin.google.maps.Map.getMap($('#project-evaluation-page #project-evaluation-map').get(0), {\r\n                    'mapType': plugin.google.maps.MapTypeId.ROADMAP,\r\n                    'camera' : {\r\n                        target: {\r\n                            lat: geoPosition.coords.latitude,\r\n                            lng: geoPosition.coords.longitude\r\n                        },\r\n                        tilt: 90,\r\n                        zoom: 20\r\n                    },\r\n                    controls: {\r\n                        'compass': false,\r\n                        'myLocationButton': false,\r\n                        'myLocation': false,\r\n                        'indoorPicker': false,\r\n                        'zoom': false,\r\n                        'mapToolbar': false\r\n                    },\r\n                    gestures: {\r\n                        scroll: false,\r\n                        tilt: false,\r\n                        zoom: false,\r\n                        rotate: false\r\n                    },\r\n                    'preferences': {\r\n                        'zoom': {\r\n                            'minZoom': 20,\r\n                            'maxZoom': 30\r\n                        },\r\n                        'building': false\r\n                    }\r\n                });\r\n\r\n                // listen for when the map object is successfully created\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectEvaluationMap.one(plugin.google.maps.event.MAP_READY, function() {\r\n                    // hide circular progress display\r\n                    $('#project-evaluation-page #project-evaluation-gps-progress').css(\"display\", \"none\");\r\n                    // flag an internal property that indicates the the map is ready to be used\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectEvaluationMap._ptracker_isMapReady = true;\r\n                    // disable the ability to click on the map\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectEvaluationMap.setClickable(false);\r\n\r\n                    // add a marker to identify the project's location on the map\r\n                    let projectMarker = utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectEvaluationMap.addMarker({\r\n                        position: {\r\n                            \"lat\": utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                projectEvaluationPageViewModel.projectGeoPosition.coords.latitude,\r\n                            \"lng\": utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                projectEvaluationPageViewModel.projectGeoPosition.coords.longitude\r\n                        },\r\n                        icon: '#00D5C3',\r\n                        'title': $('#app-main-navigator').get(0).topPage.data.projectData.TITLE.toLocaleUpperCase(),\r\n                        animation: plugin.google.maps.Animation.BOUNCE\r\n                    });\r\n                    // display marker info window\r\n                    projectMarker.showInfoWindow();\r\n                });\r\n            }\r\n            catch(err){\r\n                // inform the user of the error\r\n                window.plugins.toast.showWithOptions({\r\n                    message: \"Location Capture Failed - \" + (err.message || err),\r\n                    duration: 4000,\r\n                    position: \"top\",\r\n                    styling: {\r\n                        opacity: 1,\r\n                        backgroundColor: '#ff0000', //red\r\n                        textColor: '#FFFFFF',\r\n                        textSize: 14\r\n                    }\r\n                }, function(toastEvent){\r\n                    if(toastEvent && toastEvent.event == \"touch\"){ // user tapped the toast, so hide toast immediately\r\n                        window.plugins.toast.hide();\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"project evaluation carousel\" is changed\r\n         * @param event\r\n         */\r\n        async carouselChanged(event){\r\n            // change the css display the prev fab button\r\n            $('#project-evaluation-page #project-evaluation-prev-button').css(\"display\", \"inline-block\");\r\n            // hide the bottom toolbar of the page\r\n            $('#project-evaluation-page ons-bottom-toolbar').css(\"display\", \"none\");\r\n\r\n            // REMOVE the app background transparency, map np longer showing\r\n            $('html, body').removeClass('utopiasoftware-transparent');\r\n\r\n            // update the stay of the the fab \"prev\" or \"next\" buttons\r\n             // check if the carousel is at the last item\r\n            if(event.originalEvent.activeIndex ===\r\n                event.originalEvent.carousel.itemCount - 1) { // this is the last carousel item, so hide the next slide button\r\n                // hide the next fab button\r\n                $('#project-evaluation-page #project-evaluation-next-button').css(\"transform\", \"scale(0)\");\r\n            }\r\n            else if(event.originalEvent.activeIndex === 0) { // this is the first carousel item, so hide the prev slide button\r\n                // hide the prev fab button\r\n                $('#project-evaluation-page #project-evaluation-prev-button').css(\"transform\", \"scale(0)\");\r\n            }\r\n            else { // this is not the first or last item\r\n                $('#project-evaluation-page #project-evaluation-prev-button,#project-evaluation-page #project-evaluation-next-button')\r\n                    .css(\"transform\", \"scale(1)\");\r\n            }\r\n\r\n            // update the primary instruction and the milestone badge\r\n            if(event.originalEvent.activeIndex < utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectMilestones.length) // the carousel active index is less than the number of project milestones\r\n            {\r\n                // change the primary instructions\r\n                $('#project-evaluation-page #project-evaluation-primary-instruction').\r\n                html('Evaluate the milestones of project completion on a scale of 0 - 100%');\r\n                // change the milestone number\r\n                $('#project-evaluation-page #project-evaluation-milestone-badge').html(`Milestone ${event.originalEvent.activeIndex + 1}`);\r\n                return;\r\n            }\r\n            if(event.originalEvent.activeIndex == utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectMilestones.length) // the carousel active index is at the picture capture point\r\n            {\r\n                // change the primary instructions\r\n                $('#project-evaluation-page #project-evaluation-primary-instruction').\r\n                html('Capture the project progress in photos');\r\n                // change the milestone number\r\n                $('#project-evaluation-page #project-evaluation-milestone-badge').html(`Project Photos`);\r\n\r\n                // check if Map already exists and is ready to be used\r\n                if(utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectEvaluationMap &&\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectEvaluationMap._ptracker_isMapReady === true){\r\n                    // make the map invisible\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.projectEvaluationMap.setVisible(false);\r\n                }\r\n\r\n                return;\r\n            }\r\n            if(event.originalEvent.activeIndex == utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectMilestones.length + 1) // the carousel active index is at the geolocation capture point\r\n            {\r\n                // change the primary instructions\r\n                $('#project-evaluation-page #project-evaluation-primary-instruction').\r\n                html('Capture the project geographical location');\r\n                // change the milestone number\r\n                $('#project-evaluation-page #project-evaluation-milestone-badge').html(`Project Location`);\r\n\r\n                // check if Map already exists and is ready to be used\r\n                if(utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectEvaluationMap &&\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectEvaluationMap._ptracker_isMapReady === true){\r\n                    // make the app background transparent, so the map can show\r\n                    $('html, body').addClass('utopiasoftware-transparent');\r\n                    // make the map visible\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectEvaluationMap.setVisible(true);\r\n                }\r\n                return;\r\n            }\r\n            if(event.originalEvent.activeIndex == utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectMilestones.length + 2) // the carousel active index is at the project remarks point\r\n            {\r\n                // change the primary instructions\r\n                $('#project-evaluation-page #project-evaluation-primary-instruction').\r\n                html('Provide any remarks on the project evaluation (optional)');\r\n                // change the milestone number\r\n                $('#project-evaluation-page #project-evaluation-milestone-badge').html(`Project Evaluation Remarks`);\r\n\r\n                // display the page toolbar\r\n                await Promise.\r\n                resolve(kendo.fx($('#project-evaluation-page ons-bottom-toolbar')).slideIn(\"up\").duration(150).play());\r\n                $('#project-evaluation-page ons-bottom-toolbar').css(\"display\", \"block\");\r\n\r\n                // check if Map already exists and is ready to be used\r\n                if(utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectEvaluationMap &&\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectEvaluationMap._ptracker_isMapReady === true){\r\n                    // make the map invisible\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.projectEvaluationMap.setVisible(false);\r\n                }\r\n                return;\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the \"prev button\" for the carousel is clicked\r\n         */\r\n        prevButtonClicked(){\r\n            $('#project-evaluation-page #project-evaluation-carousel').get(0).prev();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"next button\" for the carousel is clicked\r\n         */\r\n        nextButtonClicked(){\r\n            // get the carousel used for the project evaluation\r\n            var carousel = $('#project-evaluation-page #project-evaluation-carousel').get(0);\r\n\r\n            // check which carousel index the user is on\r\n            if(carousel.getActiveIndex() === utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectMilestones.length) // the user is on the picture capture carousel index\r\n            {\r\n                // check if any photos have been taken at all\r\n                if(utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.projectPicturesUrls.length === 1){ // if the length of array is 1, no photos have been taken at all\r\n                    // inform the user of the validation error\r\n                    window.plugins.toast.showWithOptions({\r\n                        message: `Pictures not captured for project evaluation. Please take photo`,\r\n                        duration: 4000,\r\n                        position: \"center\",\r\n                        styling: {\r\n                            opacity: 1,\r\n                            backgroundColor: '#ff0000', //red\r\n                            textColor: '#FFFFFF',\r\n                            textSize: 14\r\n                        }\r\n                    }, function(toastEvent){\r\n                        if(toastEvent && toastEvent.event == \"touch\"){ // user tapped the toast, so hide toast immediately\r\n                            window.plugins.toast.hide();\r\n                        }\r\n                    });\r\n\r\n                    return; // exit method\r\n                }\r\n\r\n                // loop through the photos for the project and check if all project photos have been taken\r\n                for(let index = 1; index < 4; index++){\r\n\r\n                    // check if the photo in this index has been taken OR not\r\n                    if(!utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectPicturesUrls[index]){\r\n\r\n                        // inform the user of the validation error\r\n                        window.plugins.toast.showWithOptions({\r\n                            message: `Picture ${index} not captured for project evaluation. Please take photo`,\r\n                            duration: 4000,\r\n                            position: \"center\",\r\n                            styling: {\r\n                                opacity: 1,\r\n                                backgroundColor: '#ff0000', //red\r\n                                textColor: '#FFFFFF',\r\n                                textSize: 14\r\n                            }\r\n                        }, function(toastEvent){\r\n                            if(toastEvent && toastEvent.event == \"touch\"){ // user tapped the toast, so hide toast immediately\r\n                                window.plugins.toast.hide();\r\n                            }\r\n                        });\r\n\r\n                        return; // exit method\r\n                    } // end of if\r\n                } // end of for loop\r\n            }\r\n\r\n            if(carousel.getActiveIndex() === utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectMilestones.length + 1) // the user is on the project location capture carousel index\r\n            {\r\n                // check if the geo location in this index has been taken OR not\r\n                if(!utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.projectGeoPosition){\r\n\r\n                    // inform the user of validation error\r\n                    window.plugins.toast.showWithOptions({\r\n                        message: `Project Location not captured for project evaluation. Please capture location`,\r\n                        duration: 4000,\r\n                        position: \"center\",\r\n                        styling: {\r\n                            opacity: 1,\r\n                            backgroundColor: '#ff0000', //red\r\n                            textColor: '#FFFFFF',\r\n                            textSize: 14\r\n                        }\r\n                    }, function(toastEvent){\r\n                        if(toastEvent && toastEvent.event == \"touch\"){ // user tapped the toast, so hide toast immediately\r\n                            window.plugins.toast.hide();\r\n                        }\r\n                    });\r\n\r\n                    return; // exit method\r\n                }\r\n            }\r\n\r\n            // ALL VALIDATION SUCCESSFUL. Move to the next carousel item\r\n            carousel.next();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the \"Save Report\" Button is clicked\r\n         */\r\n        async saveReportButtonClicked(){\r\n\r\n            // inform the user that saving report is taking place\r\n            $('#loader-modal-message').html(\"Saving Report...\");\r\n            $('#loader-modal').get(0).show(); // show loader\r\n\r\n            // collect all data to be saved\r\n            var projectEvaluationReportData = {milestonesEvaluations: []}; // variable holds the project evaluation report data\r\n            // get the jQuery collection of sliders\r\n            var jQuerySliderElements = $('#project-evaluation-page .project-evaluation-slider');\r\n\r\n            // get the score of all milestones evaluated\r\n            for(let index = 0; index < utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectMilestones.length; index++){\r\n                let milestoneEvaluation = {milestoneId: utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectMilestones[index].BOQID,\r\n                milestoneTitle: utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.projectMilestones[index].CATEGORY,\r\n                    milestoneRate: utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        projectEvaluationPageViewModel.projectMilestones[index].RATE,\r\n                milestoneScore: jQuerySliderElements.eq(index).get(0)._ptracker_slider.value};\r\n\r\n                // add the milestoneEvaluation data to the collection\r\n                projectEvaluationReportData.milestonesEvaluations.push(milestoneEvaluation);\r\n            }\r\n\r\n            // attach the project data to the project evaluation report data\r\n            projectEvaluationReportData.projectData = $('#app-main-navigator').get(0).topPage.data.projectData;\r\n            // attach the project evalution report's geo location\r\n            projectEvaluationReportData.projectGeoPosition = {\r\n                latitude: utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    projectEvaluationPageViewModel.projectGeoPosition.coords.latitude,\r\n            longitude: utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                projectEvaluationPageViewModel.projectGeoPosition.coords.longitude};\r\n            // attach the projection evalution report's additional remarks\r\n            projectEvaluationReportData.reportRemarks = $('#project-evaluation-page #project-evaluation-remarks').val().trim();\r\n\r\n            // create a unique report title/id for the evaluation report\r\n            let dateStamp = new Date();\r\n            projectEvaluationReportData.title = `${projectEvaluationReportData.projectData.PROJECTID}-Report-${dateStamp.getTime()}`;\r\n            // add other metadata to the evaluation report\r\n            projectEvaluationReportData.dateStamp = dateStamp.getTime();\r\n            projectEvaluationReportData.sortingDate = [kendo.toString(dateStamp, \"yyyy\"), kendo.toString(dateStamp, \"MM\"),\r\n                kendo.toString(dateStamp, \"dd\"), kendo.toString(dateStamp, \"HH\"), kendo.toString(dateStamp, \"mm\")];\r\n            projectEvaluationReportData.formattedDate = kendo.toString(dateStamp, \"yyyy-MM-dd HH:mm:ss\");\r\n            projectEvaluationReportData.evaluatedBy = utopiasoftware[utopiasoftware_app_namespace].model.userDetails.\r\n                                                        userDetails.username;\r\n            projectEvaluationReportData._id = projectEvaluationReportData.title;\r\n            projectEvaluationReportData.TYPE = \"saved report\";\r\n\r\n            try {\r\n                var attachments = {}; // object to hold all the project evaluation picture attachments to be saved\r\n\r\n                // attach all saved project photos to the saved evaluation report data\r\n                for(let index = 1; index < 4; index++){\r\n\r\n                    // convert the project photos to blobs\r\n                    let fileEntry = await new Promise(function(resolve, reject){\r\n                        window.resolveLocalFileSystemURL(utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                            projectEvaluationPageViewModel.projectPicturesUrls[index], resolve, reject);\r\n                    }); // get a FileEntry object\r\n\r\n                    let file = await new Promise(function(resolve, reject){\r\n                        fileEntry.file(resolve, reject);\r\n                    }); // get a file object\r\n\r\n                    let fileBlob = await new Promise(function(resolve, reject){\r\n                        let fileReader = new FileReader();\r\n                        fileReader.onloadend = function(){\r\n                            if(this.error){ // an error occurred\r\n                                reject(this.error); // reject the promise\r\n                            }\r\n                            // resolve to the Blob object\r\n                            resolve(new Blob([new Uint8Array(this.result)], {type: 'image/jpeg'}));\r\n                        };\r\n\r\n                        fileReader.readAsArrayBuffer(file);\r\n                    }); // get the blob object for the picture file\r\n\r\n                    // attach the image to the database document\r\n                    attachments[`picture${index}.jpg`] = {\r\n                        \"content_type\": \"image/jpeg\",\r\n                        data: fileBlob\r\n                    };\r\n                }\r\n\r\n                // join all the attachments to the project evaluation report data\r\n                projectEvaluationReportData._attachments = attachments;\r\n                // save the project evaluation report data\r\n                await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.bulkDocs([projectEvaluationReportData]);\r\n\r\n                // hide loader\r\n                await $('#loader-modal').get(0).hide();\r\n                // inform user the evaluation report was successfully saved\r\n                await ons.notification.alert('This evaluation report has been saved successfully',\r\n                    {title: '<ons-icon icon=\"fa-check\" style=\"color: #00B2A0;\" size=\"25px\"></ons-icon> <span style=\"color: #00B2A0; display: inline-block; margin-left: 1em;\">Evaluation Report Saved</span>',\r\n                        buttonLabels: ['OK'], modifier: 'utopiasoftware-alert-dialog'});\r\n\r\n                // flag to the app that you are going back to a page that needs to be refreshed\r\n                window.sessionStorage.setItem(\"utopiasoftware-edpms-refresh-page\", \"yes\");\r\n                // move back to the project search page\r\n                $('#app-main-navigator').get(0).resetToPage(\"search-project-page.html\", {pop: true});\r\n\r\n            }\r\n            catch(err){\r\n                try{\r\n                    // remove the project evaluation report sheet document which failed to save properly from the app database\r\n                    utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.\r\n                    remove(savedDocResponse.id, savedDocResponse.rev);\r\n                }\r\n                catch(err2){}\r\n                $('#loader-modal').get(0).hide();\r\n                ons.notification.alert(`saving evaluation report sheet failed. Please try again. ${err.message || \"\"}`, {title: '<span style=\"color: red\">Saving Report Failed</span>',\r\n                    buttonLabels: ['OK'], modifier: 'utopiasoftware-alert-dialog'});\r\n            }\r\n            finally{\r\n                // hide loader\r\n                $('#loader-modal').get(0).hide();\r\n            }\r\n\r\n\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the View Reports page\r\n     */\r\n    viewReportsPageViewModel: {\r\n\r\n        /**\r\n         * holds the maximum number of reports that can be retrieved per request from the app database\r\n         */\r\n        reportPageSize: 20,\r\n\r\n        /**\r\n         * holds the number of reports to skip/jump before retrieving reports from app database\r\n         */\r\n        skip: 0,\r\n\r\n        /**\r\n         * holds the total number of reports contained in the app database\r\n         */\r\n        totalReports: 0,\r\n\r\n        /**\r\n         * holds the unique unique report id for all reports 'checked' for deletion\r\n         */\r\n        selectedReportsCollectionMap: new Map(),\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.backButtonClicked;\r\n\r\n                // listen for the infinite scroll event on the page\r\n                $('#app-main-navigator').get(0).topPage.onInfiniteScroll =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.pageInfiniteScroll;\r\n\r\n                // add method to handle the loading action of the pull-to-refresh widget\r\n                $('#view-reports-pull-hook', $thisPage).get(0).onAction =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.pagePullHookAction;\r\n\r\n                // register listener for the pull-to-refresh widget\r\n                $('#view-reports-pull-hook', $thisPage).on(\"changestate\", function(event){\r\n\r\n                    // check the state of the pull-to-refresh widget\r\n                    switch (event.originalEvent.state){\r\n                        case 'initial':\r\n                            // update the displayed icon\r\n                            $('#view-reports-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"fa-long-arrow-down\" size=\"24px\" style=\"color: #FFFFFF\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'preaction':\r\n\r\n                            $('#view-reports-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"fa-long-arrow-up\" size=\"24px\" style=\"color: #FFFFFF\"></ons-icon>');\r\n                            break;\r\n\r\n                        case 'action':\r\n                            $('#view-reports-pull-hook-fab', event.originalEvent.pullHook).\r\n                            html('<ons-icon icon=\"md-utopiasoftware-icon-spinner\" size=\"24px\" spin style=\"color: #FFFFFF\"></ons-icon>');\r\n                            break;\r\n                    }\r\n                });\r\n\r\n                // show the page preloader\r\n                $('#view-reports-page .page-preloader').css(\"display\", \"block\");\r\n                // hide the items that are not to be displayed\r\n                $('#view-reports-page .no-report-found, ' +\r\n                    '#view-reports-page .view-reports-load-error, #view-reports-page #view-reports-list').\r\n                css(\"display\", \"none\");\r\n\r\n                // pick the reports that have been saved by user to-date in descending order\r\n                try{\r\n\r\n                    let dbQueryResult = await utopiasoftware[utopiasoftware_app_namespace].projectEvaluationReportData.\r\n                    loadProjectEvaluationReports(false,\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.reportPageSize,\r\n                        utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.skip, true,\r\n                        Date.now(), new Date(2018, 0, 1).getTime());\r\n\r\n                    // check if any saved reports were returned\r\n                    if(dbQueryResult.rows.length == 0) { // no saved report found\r\n                        // inform the user that no saved reports are available\r\n                        $('#view-reports-page .page-preloader').css(\"display\", \"none\");\r\n                        // hide the items that are not to be displayed\r\n                        $('#view-reports-page .view-reports-load-error, #view-reports-page #view-reports-list').\r\n                        css(\"display\", \"none\");\r\n                        // show the no reports messages\r\n                        $('#view-reports-page .no-report-found').css(\"display\", \"block\");\r\n                        return;\r\n                    }\r\n\r\n                    // update the properties of the View-Model\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.\r\n                        skip += dbQueryResult.rows.length;\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.\r\n                        totalReports = dbQueryResult.total_rows;\r\n\r\n                    // create the report list content\r\n                    let viewReportListContent = \"\";\r\n                    for(let index = 0; index < dbQueryResult.rows.length; index++)\r\n                    {\r\n                        viewReportListContent += `\r\n                        <ons-list-item modifier=\"longdivider\" tappable lock-on-drag=\"true\" \r\n                        data-utopiasoftware-ptracker-report-id=\"${dbQueryResult.rows[index].value._id}\" \r\n                        data-utopiasoftware-ptracker-report-rev=\"${dbQueryResult.rows[index].value._rev}\"\r\n                           onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                           viewReportsPageViewModel.viewReportListItemClicked(this, event)\">\r\n                            <div class=\"left\">\r\n                                <ons-icon icon=\"md-utopiasoftware-icon-document-text\" size=\"46px\" class=\"list-item__icon\" style=\"color: #3F51B5\" fixed-width></ons-icon>\r\n                            </div>\r\n                            <div class=\"center\" style=\"margin-left: 1em\">\r\n                                <span class=\"list-item__title\" style=\"color: #3F51B5\">${dbQueryResult.rows[index].value._id}</span>\r\n                                <span class=\"list-item__subtitle\">Project: ${dbQueryResult.rows[index].value.projectId}</span>\r\n                                <span class=\"list-item__subtitle\">Evaluated By: ${utopiasoftware[utopiasoftware_app_namespace].model.userDetails.userDetails.username}</span>\r\n                                <span class=\"list-item__subtitle\" style=\"font-size: 0.6em\">\r\n                                ${kendo.toString(new Date(dbQueryResult.rows[index].value.dateStamp), \"MMMM d, yyyy h:mm tt\")}\r\n                                </span>\r\n                            </div>\r\n                            <div class=\"right\">\r\n                                <ons-fab modifier=\"mini\" style=\"background-color: transparent; color: #f30000\" \r\n                                onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                viewReportsPageViewModel.reportDeleteButtonClicked('${dbQueryResult.rows[index].value._id}', \r\n                                '${dbQueryResult.rows[index].value._rev}')\">\r\n                                    <ons-icon icon=\"md-delete\">\r\n                                    </ons-icon>\r\n                                </ons-fab>\r\n                                <ons-checkbox modifier=\"login-checkbox\" value=\"delete\" \r\n                                onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                viewReportsPageViewModel.reportCheckBoxClicked(this, '${dbQueryResult.rows[index].value._id}', \r\n                                '${dbQueryResult.rows[index].value._rev}')\"></ons-checkbox>\r\n                            </div>\r\n                        </ons-list-item>`;\r\n                    } // end of for loop\r\n\r\n                    // append generated list content to the view-reports\r\n                    $('#view-reports-page #view-reports-list').html(viewReportListContent);\r\n\r\n\r\n                    // hide the page preloader\r\n                    $('#view-reports-page .page-preloader').css(\"display\", \"none\");\r\n                    // hide the items that are not to be displayed\r\n                    $('#view-reports-page .no-report-found, #view-reports-page .view-reports-load-error').\r\n                    css(\"display\", \"none\");\r\n                    // display the view reports list\r\n                    $('#view-reports-page #view-reports-list').css(\"display\", \"block\");\r\n                }\r\n                catch (e) {\r\n\r\n                    // hide the page preloader\r\n                    $('#view-reports-page .page-preloader').css(\"display\", \"none\");\r\n                    // hide the items that are not to be displayed\r\n                    $('#view-reports-page .no-report-found, #view-reports-page #view-reports-list').\r\n                    css(\"display\", \"none\");\r\n                    // display the error message to user\r\n                    $('#view-reports-page .view-reports-load-error').css(\"display\", \"block\");\r\n\r\n                }\r\n                finally{\r\n                    // hide the loader\r\n                    $('#loader-modal').get(0).hide();\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // adjust the window/view-port settings for when the soft keyboard is displayed\r\n            window.SoftInputMode.set('adjustPan'); // let the window/view-port 'pan' when the soft keyboard is displayed\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: function(){\r\n            // adjust the window/view-port settings for when the soft keyboard is displayed\r\n            // window.SoftInputMode.set('adjustResize'); // let the view 'resize' when the soft keyboard is displayed\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n            // reset the object properties to their default values\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.\r\n                skip = 0;\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.\r\n                totalReports = 0;\r\n            // empty the collection of selected/checked reports\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.\r\n            selectedReportsCollectionMap.clear();\r\n\r\n            // uncheck the Bulk Delete checkbox in the Additional Menu Popover\r\n            $('#view-reports-bulk-delete-checkbox').get(0).checked = false;\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        async backButtonClicked(){\r\n\r\n            // check if the side menu is open\r\n            if($('ons-splitter').get(0).right.isOpen){ // side menu open, so close it\r\n                $('ons-splitter').get(0).right.close();\r\n                return; // exit the method\r\n            }\r\n\r\n            // move to the project evaluation page\r\n            $('#app-main-navigator').get(0).popPage();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the delete fab button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async reportDeleteButtonClicked(docId, docRevision){\r\n\r\n            // ask user to confirm evaluation report delete\r\n            let deleteReport = await ons.notification.confirm('Do you want to delete the report?',\r\n                {title: '<ons-icon icon=\"md-delete\" style=\"color: #3f51b5\" size=\"33px\"></ons-icon> <span style=\"color: #3f51b5; display: inline-block; margin-left: 1em;\">Delete Report</span>',\r\n                    buttonLabels: ['No', 'Yes'], modifier: 'utopiasoftware-alert-dialog'});\r\n\r\n            if(deleteReport == 0){ // user does not want to delete report, so exit method now\r\n                return; // exit method\r\n            }\r\n\r\n            var jQueryListItem = $(`#view-reports-page #view-reports-list ons-list-item[data-utopiasoftware-ptracker-report-id=\"${docId}\"]`);\r\n\r\n            //remove the list item from view with an animation\r\n            await Promise.resolve(kendo.fx(jQueryListItem).slideIn(\"right\").duration(400).reverse());\r\n            // remove the element from the list item altogether\r\n            jQueryListItem.remove();\r\n\r\n            try {\r\n                // remove the evaluation report from database\r\n                await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.remove(docId, docRevision);\r\n\r\n                // inform the user that evaluation report has been delete\r\n                // display a toast to the user\r\n                ons.notification.toast(`<ons-icon icon=\"md-delete\" size=\"28px\" style=\"color: #00D5C3\"></ons-icon> <span style=\"text-transform: capitalize; display: inline-block; margin-left: 1em\">Report Deleted</span>`, {timeout: 2500});\r\n            }\r\n            catch(err){\r\n\r\n            }\r\n        },\r\n\r\n\r\n        async reportCheckBoxClicked(checkboxElement, docId, docRevision){\r\n\r\n            // check if the clicked checkbox is in a checked state or not\r\n            if(checkboxElement.checked === true){ // the clicked checkbox is in a checked state\r\n                // add the unique report id attached to the clicked checkbox to the collection of selected reports\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.\r\n                    selectedReportsCollectionMap.set(docId, {_id: docId, _rev: docRevision, _deleted: true});\r\n\r\n            }\r\n            else{ // the clicked checkbox is in an unchecked state\r\n                // remove the unique report id attached to the clicked checkbox from the collection of selected reports\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.\r\n                selectedReportsCollectionMap.delete(docId);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered on page infinite scroll\r\n         * @param doneCallBack {function}\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pageInfiniteScroll(doneCallBack){\r\n            // append the loader icon/indicator to the view-reports lists\r\n            $('#view-reports-page #view-reports-list').\r\n            append(`<ons-list-item modifier=\"nodivider\" lock-on-drag=\"true\" class=\"list-view-infinite-loader\">\r\n                <div class=\"left\">\r\n                </div>\r\n                <div class=\"center\">\r\n                    <div style=\"width: 100%; text-align: center\">\r\n                        <ons-icon icon=\"md-utopiasoftware-icon-spinner\" spin size=\"42px\" class=\"list-item__icon\" style=\"color: #00D5C3\"></ons-icon>\r\n                    </div>\r\n                </div>\r\n                <div class=\"right\">\r\n                </div>\r\n            </ons-list-item>`);\r\n\r\n            // load additional reports to the page\r\n            try{\r\n                // check if there if this is the last set/page of reports or not\r\n                if(utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.skip >=\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.totalReports){\r\n                    // remove the loader icon/indicator to the view-reports lists\r\n                    $('#view-reports-page #view-reports-list .list-view-infinite-loader').remove();\r\n                    doneCallBack();\r\n                    // this is the last set/page of reports. so no need to load any more\r\n                    return;\r\n                }\r\n\r\n                // pick the reports that have been saved by user to-date in descending order (Note the skip value)\r\n                let dbQueryResult = await utopiasoftware[utopiasoftware_app_namespace].projectEvaluationReportData.\r\n                loadProjectEvaluationReports(false,\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.reportPageSize,\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.skip, true,\r\n                    Date.now(), new Date(2018, 0, 1).getTime());\r\n\r\n                // check if any saved reports were returned\r\n                if(dbQueryResult.rows.length == 0) { // no saved report found\r\n                    // remove the loader icon/indicator to the view-reports lists\r\n                    $('#view-reports-page #view-reports-list .list-view-infinite-loader').remove();\r\n                    doneCallBack();\r\n                    // no report data was returned, so exit method\r\n                    return;\r\n                }\r\n\r\n                // update the properties of the View-Model\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.\r\n                    skip += dbQueryResult.rows.length;\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.\r\n                    totalReports = dbQueryResult.total_rows;\r\n\r\n                // create the report list content\r\n                let viewReportListContent = \"\";\r\n                for(let index = 0; index < dbQueryResult.rows.length; index++)\r\n                {\r\n                    viewReportListContent += `\r\n                        <ons-list-item modifier=\"longdivider\" tappable lock-on-drag=\"true\" \r\n                        data-utopiasoftware-ptracker-report-id=\"${dbQueryResult.rows[index].value._id}\" \r\n                        data-utopiasoftware-ptracker-report-rev=\"${dbQueryResult.rows[index].value._rev}\"\r\n                           onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                           viewReportsPageViewModel.viewReportListItemClicked(this, event)\">\r\n                            <div class=\"left\">\r\n                                <ons-icon icon=\"md-utopiasoftware-icon-document-text\" size=\"46px\" class=\"list-item__icon\" style=\"color: #3F51B5\" fixed-width></ons-icon>\r\n                            </div>\r\n                            <div class=\"center\" style=\"margin-left: 1em\">\r\n                                <span class=\"list-item__title\" style=\"color: #3F51B5\">${dbQueryResult.rows[index].value._id}</span>\r\n                                <span class=\"list-item__subtitle\">Project: ${dbQueryResult.rows[index].value.projectId}</span>\r\n                                <span class=\"list-item__subtitle\">Evaluated By: ${utopiasoftware[utopiasoftware_app_namespace].model.userDetails.userDetails.username}</span>\r\n                                <span class=\"list-item__subtitle\" style=\"font-size: 0.6em\">\r\n                                ${kendo.toString(new Date(dbQueryResult.rows[index].value.dateStamp), \"MMMM d, yyyy h:mm tt\")}\r\n                                </span>\r\n                            </div>\r\n                            <div class=\"right\">\r\n                                <ons-fab modifier=\"mini\" style=\"background-color: transparent; color: #f30000\" \r\n                                onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                viewReportsPageViewModel.reportDeleteButtonClicked('${dbQueryResult.rows[index].value._id}', \r\n                                '${dbQueryResult.rows[index].value._rev}')\">\r\n                                    <ons-icon icon=\"md-delete\">\r\n                                    </ons-icon>\r\n                                </ons-fab>\r\n                                <ons-checkbox modifier=\"login-checkbox\" value=\"delete\" \r\n                                onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                viewReportsPageViewModel.reportCheckBoxClicked(this, '${dbQueryResult.rows[index].value._id}', \r\n                                '${dbQueryResult.rows[index].value._rev}')\"></ons-checkbox>\r\n                            </div>\r\n                        </ons-list-item>`;\r\n                } // end of for loop\r\n\r\n                // remove the loader icon/indicator to the view-reports lists\r\n                $('#view-reports-page #view-reports-list .list-view-infinite-loader').remove();\r\n                // append generated list content to the view-reports\r\n                $('#view-reports-page #view-reports-list').append(viewReportListContent);\r\n                doneCallBack();\r\n            }\r\n            catch (e) {\r\n                // remove the loader icon/indicator to the view-reports lists\r\n                $('#view-reports-page #view-reports-list .list-view-infinite-loader').remove();\r\n                doneCallBack();\r\n                // display message to inform user of load error\r\n                ons.notification.toast(`<ons-icon icon=\"md-alert-circle\" size=\"28px\" style=\"color: yellow\"></ons-icon> <span style=\"text-transform: capitalize; display: inline-block; margin-left: 1em; color: yellow\">Loading Error. Try Again</span>`, {timeout: 3000});\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the pull-hook on the page is active\r\n         *\r\n         * @param doneCallBack\r\n         * @returns {Promise<void>}\r\n         */\r\n        async pagePullHookAction(doneCallBack = function(){}){\r\n            // disable pull-to-refresh widget till loading is done\r\n            $('#view-reports-page #view-reports-pull-hook').attr(\"disabled\", true);\r\n            // empty the collection of selected/checked reports\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.\r\n            selectedReportsCollectionMap.clear();\r\n\r\n            // reload reports to the page. start from the 1st\r\n            try{\r\n\r\n                // pick the reports that have been saved by user to-date in descending order (Note the skip value)\r\n                let dbQueryResult = await utopiasoftware[utopiasoftware_app_namespace].projectEvaluationReportData.\r\n                loadProjectEvaluationReports(false,\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.reportPageSize, 0, true,\r\n                    Date.now(), new Date(2018, 0, 1).getTime());\r\n\r\n                // check if any saved reports were returned\r\n                if(dbQueryResult.rows.length == 0) { // no saved report found\r\n                    // enable pull-to-refresh widget\r\n                    $('#view-reports-page #view-reports-pull-hook').removeAttr(\"disabled\");\r\n                    // hide the items that are not to be displayed\r\n                    $('#view-reports-page .view-reports-load-error, #view-reports-page #view-reports-list').\r\n                    css(\"display\", \"none\");\r\n                    // show the no reports messages\r\n                    $('#view-reports-page .no-report-found').css(\"display\", \"block\");\r\n                    // inform ONSEN that the refresh action is completed\r\n                    doneCallBack();\r\n                    return;\r\n                }\r\n\r\n                // update the properties of the View-Model\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.\r\n                    skip = dbQueryResult.rows.length;\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.\r\n                    totalReports = dbQueryResult.total_rows;\r\n\r\n                // create the report list content\r\n                let viewReportListContent = \"\";\r\n                for(let index = 0; index < dbQueryResult.rows.length; index++)\r\n                {\r\n                    viewReportListContent += `\r\n                        <ons-list-item modifier=\"longdivider\" tappable lock-on-drag=\"true\" \r\n                        data-utopiasoftware-ptracker-report-id=\"${dbQueryResult.rows[index].value._id}\" \r\n                        data-utopiasoftware-ptracker-report-rev=\"${dbQueryResult.rows[index].value._rev}\"\r\n                           onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                           viewReportsPageViewModel.viewReportListItemClicked(this, event)\">\r\n                            <div class=\"left\">\r\n                                <ons-icon icon=\"md-utopiasoftware-icon-document-text\" size=\"46px\" class=\"list-item__icon\" style=\"color: #3F51B5\" fixed-width></ons-icon>\r\n                            </div>\r\n                            <div class=\"center\" style=\"margin-left: 1em\">\r\n                                <span class=\"list-item__title\" style=\"color: #3F51B5\">${dbQueryResult.rows[index].value._id}</span>\r\n                                <span class=\"list-item__subtitle\">Project: ${dbQueryResult.rows[index].value.projectId}</span>\r\n                                <span class=\"list-item__subtitle\">Evaluated By: ${utopiasoftware[utopiasoftware_app_namespace].model.userDetails.userDetails.username}</span>\r\n                                <span class=\"list-item__subtitle\" style=\"font-size: 0.6em\">\r\n                                ${kendo.toString(new Date(dbQueryResult.rows[index].value.dateStamp), \"MMMM d, yyyy h:mm tt\")}\r\n                                </span>\r\n                            </div>\r\n                            <div class=\"right\">\r\n                                <ons-fab modifier=\"mini\" style=\"background-color: transparent; color: #f30000\" \r\n                                onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                viewReportsPageViewModel.reportDeleteButtonClicked('${dbQueryResult.rows[index].value._id}', \r\n                                '${dbQueryResult.rows[index].value._rev}')\">\r\n                                    <ons-icon icon=\"md-delete\">\r\n                                    </ons-icon>\r\n                                </ons-fab>\r\n                                <ons-checkbox modifier=\"login-checkbox\" value=\"delete\" \r\n                                onclick=\"utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                viewReportsPageViewModel.reportCheckBoxClicked(this, '${dbQueryResult.rows[index].value._id}', \r\n                                '${dbQueryResult.rows[index].value._rev}')\"></ons-checkbox>\r\n                            </div>\r\n                        </ons-list-item>`;\r\n                } // end of for loop\r\n\r\n                // enable pull-to-refresh widget\r\n                $('#view-reports-page #view-reports-pull-hook').removeAttr(\"disabled\");\r\n                // append generated list content to the view-reports\r\n                $('#view-reports-page #view-reports-list').html(viewReportListContent);\r\n                // hide the items that are not to be displayed\r\n                $('#view-reports-page .no-report-found, #view-reports-page .view-reports-load-error').\r\n                css(\"display\", \"none\");\r\n                // display the view reports list\r\n                $('#view-reports-page #view-reports-list').css(\"display\", \"block\");\r\n                // inform ONSEN that the refresh action is completed\r\n                doneCallBack();\r\n            }\r\n            catch (e) {\r\n                // enable pull-to-refresh widget\r\n                $('#view-reports-page #view-reports-pull-hook').removeAttr(\"disabled\");\r\n                doneCallBack();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when any of the list items on the view report lisat is clicked\r\n         * @param listItemElement {HTMLElement} the list item that was clicked\r\n         * @param event {Event}\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async viewReportListItemClicked(listItemElement, event){\r\n\r\n            if($(event.target).closest('ons-fab', listItemElement).is('ons-fab')){ // check if it is the delete fab that has been clicked\r\n                return; // exit. the checkbox was clicked, so take no further action\r\n            }\r\n\r\n            if($(event.target).closest('ons-checkbox', listItemElement).is('ons-checkbox')){ // check if it is the checkbox that has been clicked\r\n                return; // exit. the checkbox was clicked, so take no further action\r\n            }\r\n\r\n            var jQueryListItem = $(listItemElement); // convert the list item to a jquery object and get required data attributes\r\n\r\n            // push the evaluation report page into view\r\n            $('#app-main-navigator').get(0).pushPage(\"evaluation-report-page.html\", {animation: \"slide-md\",\r\n                data: {reportDetails: {id: jQueryListItem.attr('data-utopiasoftware-ptracker-report-id'),\r\n                                        rev: jQueryListItem.attr('data-utopiasoftware-ptracker-report-rev')}}});\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the bulk delete option is clicked from the\r\n         * Addition Menu Popover List\r\n         * @returns {Promise<void>}\r\n         */\r\n        async bulkDeletePopOverListItemClicked(){\r\n\r\n            // hide the Additional Menu Popover\r\n            await Promise.resolve($('#view-reports-additional-menu-popover').get(0).hide());\r\n\r\n            // check if the bulk delete checkbox is checked or not\r\n            if($('#view-reports-bulk-delete-checkbox').get(0).checked === true){ // checkbox is checked\r\n                // hide all the delete buttons displayed on the view-reports-list and show the checkboxes\r\n                $('#view-reports-page #view-reports-list').removeClass('show-delete').addClass('hide-delete');\r\n                // show the Bulk Delete button\r\n                await Promise.\r\n                resolve(kendo.fx($('#view-reports-page #view-reports-bottom-toolbar-bulk-delete-block')).\r\n                slideIn(\"up\").duration(400).play());\r\n                $('#view-reports-page #view-reports-bottom-toolbar-bulk-delete-block').css(\"display\", \"block\");\r\n            }\r\n            else{ // checkbox is NOT checked\r\n\r\n                // uncheck ALL previously checked checkboxes on the view-reports list\r\n                $('#view-reports-page #view-reports-list ons-checkbox').\r\n                each(function(index, element){\r\n                    element.checked = false;\r\n                });\r\n\r\n                // empty the collection of selected/checked reports\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.\r\n                    selectedReportsCollectionMap.clear();\r\n\r\n                // show all the delete buttons displayed on the view-reports-list and hide the checkboxes\r\n                $('#view-reports-page #view-reports-list').removeClass('hide-delete').addClass('show-delete');\r\n                // hide the Bulk Delete button\r\n                await Promise.\r\n                resolve(kendo.fx($('#view-reports-page #view-reports-bottom-toolbar-bulk-delete-block')).\r\n                slideIn(\"up\").duration(400).reverse());\r\n                $('#view-reports-page #view-reports-bottom-toolbar-bulk-delete-block').css(\"display\", \"none\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the Delete bottom toolbar button is clicked\r\n         * @returns {Promise<void>}\r\n         */\r\n        async bulkDeleteButtonClicked(){\r\n\r\n            // ask user to confirm evaluation report delete\r\n            let deleteReport = await ons.notification.confirm('Do you want to delete the selected reports?',\r\n                {title: '<ons-icon icon=\"md-delete\" style=\"color: #3f51b5\" size=\"33px\"></ons-icon> <span style=\"color: #3f51b5; display: inline-block; margin-left: 1em;\">Delete Report</span>',\r\n                    buttonLabels: ['No', 'Yes'], modifier: 'utopiasoftware-alert-dialog'});\r\n\r\n            if(deleteReport == 0){ // user does not want to delete report, so exit method now\r\n                return; // exit method\r\n            }\r\n\r\n            // get the collection of selected reports for deletion\r\n            let selectedReportArray = [...utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.\r\n                selectedReportsCollectionMap].map(function(currentValue, index){\r\n                    return currentValue[1];\r\n            });\r\n\r\n            if(selectedReportArray.length === 0){ //  there are no selected reports to delete, so exit the method\r\n                return; // exit method\r\n            }\r\n\r\n            try{\r\n                // show the page preloader\r\n                $('#view-reports-page .page-preloader').css(\"display\", \"block\");\r\n                await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.bulkDocs(selectedReportArray);\r\n                // get a collection of the list items that match the selected reports\r\n                selectedReportArray.forEach(function(arrayObj, index){\r\n                    selectedReportArray[index] =\r\n                        $(`#view-reports-page #view-reports-list ons-list-item[data-utopiasoftware-ptracker-report-id=\"${arrayObj._id}\"]`).\r\n                        get(0);\r\n                });\r\n\r\n                // remove the collection of elements from the list item\r\n                $(selectedReportArray).remove();\r\n                // display a toast to the user\r\n                await ons.notification.toast(`<ons-icon icon=\"md-delete\" size=\"28px\" style=\"color: #00D5C3\"></ons-icon> <span style=\"text-transform: capitalize; display: inline-block; margin-left: 1em\">${selectedReportArray.length} ${selectedReportArray.length === 1 ? \"Report\": \"Reports\"} Deleted</span>`, {timeout: 2500});\r\n                // clear/empty the selected reports collection\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.viewReportsPageViewModel.selectedReportsCollectionMap.\r\n                clear();\r\n                // hide the page preloader\r\n                $('#view-reports-page .page-preloader').css(\"display\", \"none\");\r\n                selectedReportArray = [];\r\n\r\n            }\r\n            catch(err){\r\n                console.log(\"BULK DELETE ERROR\", err);\r\n                // hide the page preloader\r\n                $('#view-reports-page .page-preloader').css(\"display\", \"none\");\r\n                // display message to inform user of load error\r\n                ons.notification.toast(`<ons-icon icon=\"md-alert-circle\" size=\"28px\" style=\"color: yellow\"></ons-icon> <span style=\"text-transform: capitalize; display: inline-block; margin-left: 1em; color: yellow\">Bulk Delete Failed</span>`, {timeout: 3000});\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * this is the view-model/controller for the View Reports page\r\n     */\r\n    evaluationReportPageViewModel: {\r\n\r\n        /**\r\n         * holds the dynamically created url for the project evaluation photo 1\r\n         */\r\n        projectPicture1Url: null,\r\n\r\n        /**\r\n         * holds the dynamically created url for the project evaluation photo 2\r\n         */\r\n        projectPicture2Url: null,\r\n\r\n        /**\r\n         * holds the dynamically created url for the project evaluation photo 3\r\n         */\r\n        projectPicture3Url: null,\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.evaluationReportPageViewModel.backButtonClicked;\r\n\r\n                // show the page preloader\r\n                $('#evaluation-report-page .page-preloader').css(\"display\", \"block\");\r\n                // hide the items that are not to be displayed\r\n                $('#evaluation-report-page .no-report-found, ' +\r\n                    '#evaluation-report-page .evaluation-report-load-error, #evaluation-report-page #evaluation-report-list').\r\n                css(\"display\", \"none\");\r\n                $('#evaluation-report-page #evaluation-report-delete-fab').attr(\"disabled\", true);\r\n\r\n                // pick the evaluation report to delete\r\n                try{\r\n\r\n                    let evaluationReport = await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.get(\r\n                        $('#app-main-navigator').get(0).topPage.data.reportDetails.id,\r\n                        {attachments: true, binary: true}\r\n                    );\r\n\r\n                    // get the object urls for the 3 project evaluation photos\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        evaluationReportPageViewModel.projectPicture1Url = window.URL.\r\n                    createObjectURL(evaluationReport._attachments['picture1.jpg'].data);\r\n                    // get the object urls for the 3 project evaluation photos\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        evaluationReportPageViewModel.projectPicture2Url = window.URL.\r\n                    createObjectURL(evaluationReport._attachments['picture2.jpg'].data);\r\n                    // get the object urls for the 3 project evaluation photos\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                        evaluationReportPageViewModel.projectPicture3Url = window.URL.\r\n                    createObjectURL(evaluationReport._attachments['picture3.jpg'].data);\r\n\r\n                    // create the evaluation report list content\r\n                    let evaluationReportListContent = `\r\n                    <ons-list-header>Report Title</ons-list-header>\r\n                    <ons-list-item modifier=\"longdivider\" lock-on-drag=\"true\"\r\n                                   onclick=\"\">\r\n                        <div class=\"center\" style=\"\">\r\n                            <span class=\"list-item__title\" style=\"color: #3F51B5; text-transform: uppercase\">${evaluationReport.title}</span>\r\n                        </div>\r\n                    </ons-list-item>\r\n                    \r\n                    <ons-list-header>Project Title</ons-list-header>\r\n                    <ons-list-item modifier=\"longdivider\" lock-on-drag=\"true\"\r\n                                   onclick=\"\">\r\n                        <div class=\"center\" style=\"\">\r\n                            <span class=\"list-item__title\" style=\"color: #3F51B5; text-transform: uppercase\">${evaluationReport.projectData.TITLE}</span>\r\n                        </div>\r\n                    </ons-list-item>\r\n                    \r\n                    <ons-list-header>Project ID</ons-list-header>\r\n                    <ons-list-item modifier=\"longdivider\" lock-on-drag=\"true\"\r\n                                   onclick=\"\">\r\n                        <div class=\"center\" style=\"\">\r\n                            <span class=\"list-item__title\" style=\"color: #3F51B5; text-transform: uppercase\">${evaluationReport.projectData.PROJECTID}</span>\r\n                        </div>\r\n                    </ons-list-item>\r\n                    \r\n                    <ons-list-header>Project Milestones</ons-list-header>\r\n                    <ons-list-item modifier=\"longdivider\" lock-on-drag=\"true\" expandable\r\n                                   onclick=\"\">\r\n                        <div class=\"center\" style=\"\">\r\n                            <span class=\"list-item__title\" style=\"color: #3F51B5;\">Milestone Progress Evaluation</span>\r\n                        </div>\r\n                        <div class=\"expandable-content\">\r\n                            <div class=\"row\">`;\r\n                    for(let index = 0; index < evaluationReport.milestonesEvaluations.length; index++){\r\n                        evaluationReportListContent += `\r\n                        <div class=\"col-xs-9\" style=\"text-transform: capitalize\">\r\n                        ${evaluationReport.milestonesEvaluations[index].milestoneTitle}</div>\r\n                        <div class=\"col-xs-3\" style=\"text-align: left; padding-left: 1em;\">\r\n                        ${evaluationReport.milestonesEvaluations[index].milestoneScore}%</div>`;\r\n                    }\r\n\r\n                    evaluationReportListContent += `\r\n                        </div>\r\n                        </div>\r\n                    </ons-list-item>\r\n\r\n                    <ons-list-header>Project Photos</ons-list-header>\r\n                    <ons-list-item modifier=\"longdivider\" lock-on-drag=\"true\" expandable\r\n                                   onclick=\"\">\r\n                        <div class=\"center\" style=\"\">\r\n                            <span class=\"list-item__title\" style=\"color: #3F51B5;\">View Photos</span>\r\n                        </div>\r\n                        <div class=\"expandable-content\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-xs-6\" style=\"padding: 0.5em;\">\r\n                                    <img src=\"${utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                    evaluationReportPageViewModel.projectPicture1Url}\" style=\"width: 100%; border: 2px darkgray groove\">\r\n                                </div>\r\n                                <div class=\"col-xs-6\" style=\"padding: 0.5em;\">\r\n                                    <img src=\"${utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                evaluationReportPageViewModel.projectPicture2Url}\" style=\"width: 100%; border: 2px darkgray groove\">\r\n                                </div>\r\n                                <div class=\"col-xs-6\" style=\"padding: 0.5em;\">\r\n                                    <img src=\"${utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                                evaluationReportPageViewModel.projectPicture3Url}\" style=\"width: 100%; border: 2px darkgray groove\">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </ons-list-item>\r\n                    \r\n                    <ons-list-header>Project Location</ons-list-header>\r\n                    <ons-list-item modifier=\"longdivider\" lock-on-drag=\"true\"\r\n                                   onclick=\"\">\r\n                        <div class=\"center\" style=\"\">\r\n                            <span class=\"list-item__title\" style=\"color: #3F51B5;\">${evaluationReport.projectGeoPosition.latitude},${evaluationReport.projectGeoPosition.longitude}</span>\r\n                        </div>\r\n                    </ons-list-item>\r\n        \r\n                    <ons-list-header>Evaluation Remarks</ons-list-header>\r\n                    <ons-list-item modifier=\"longdivider\" lock-on-drag=\"true\"\r\n                                   onclick=\"\">\r\n                        <div class=\"center\" style=\"\">\r\n                            <span class=\"list-item__title\" style=\"color: #3F51B5;\">${evaluationReport.reportRemarks.replace(/\\n/ig, \"<br>\")}</span>\r\n                        </div>\r\n                    </ons-list-item>\r\n        \r\n                    <ons-list-header>Evaluation By</ons-list-header>\r\n                    <ons-list-item modifier=\"longdivider\" lock-on-drag=\"true\"\r\n                                   onclick=\"\">\r\n                        <div class=\"center\" style=\"\">\r\n                            <span class=\"list-item__title\" style=\"color: #3F51B5;\">${evaluationReport.evaluatedBy}</span>\r\n                        </div>\r\n                    </ons-list-item>\r\n        \r\n                    <ons-list-header>Evaluation Date</ons-list-header>\r\n                    <ons-list-item modifier=\"longdivider\" lock-on-drag=\"true\"\r\n                                   onclick=\"\">\r\n                        <div class=\"center\" style=\"\">\r\n                            <span class=\"list-item__title\" style=\"color: #3F51B5;\">${kendo.toString(new Date(evaluationReport.dateStamp), \"MMMM d, yyyy h:mm tt\")}</span>\r\n                        </div>\r\n                    </ons-list-item>`;\r\n\r\n                    // append generated list content to the evaluation report\r\n                    $('#evaluation-report-page #evaluation-report-list').html(evaluationReportListContent);\r\n\r\n\r\n                    // hide the page preloader\r\n                    $('#evaluation-report-page .page-preloader').css(\"display\", \"none\");\r\n                    // hide the items that are not to be displayed\r\n                    $('#evaluation-report-page .no-report-found, #evaluation-report-page .evaluation-report-load-error').\r\n                    css(\"display\", \"none\");\r\n                    // display the view reports list\r\n                    $('#evaluation-report-page #evaluation-report-list').css(\"display\", \"block\");\r\n                    $('#evaluation-report-page #evaluation-report-delete-fab').removeAttr(\"disabled\");\r\n                }\r\n                catch (e) {\r\n\r\n                    // hide the page preloader\r\n                    $('#evaluation-report-page .page-preloader').css(\"display\", \"none\");\r\n                    // hide the items that are not to be displayed\r\n                    $('#evaluation-report-page .no-report-found, #evaluation-report-page #evaluation-report-list').\r\n                    css(\"display\", \"none\");\r\n                    $('#evaluation-report-page #evaluation-report-delete-fab').attr(\"disabled\", true);\r\n                    // display the error message to user\r\n                    $('#evaluation-report-page .evaluation-report-load-error').css(\"display\", \"block\");\r\n\r\n                }\r\n                finally{\r\n                    // hide the loader\r\n                    $('#loader-modal').get(0).hide();\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // adjust the window/view-port settings for when the soft keyboard is displayed\r\n            window.SoftInputMode.set('adjustPan'); // let the window/view-port 'pan' when the soft keyboard is displayed\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: function(){\r\n            // adjust the window/view-port settings for when the soft keyboard is displayed\r\n            // window.SoftInputMode.set('adjustResize'); // let the view 'resize' when the soft keyboard is displayed\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n            // destroy all picture object urls created for this page\r\n            window.URL.revokeObjectURL(\r\n            utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                evaluationReportPageViewModel.projectPicture1Url);\r\n            window.URL.revokeObjectURL(\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    evaluationReportPageViewModel.projectPicture2Url);\r\n            window.URL.revokeObjectURL(\r\n                utopiasoftware[utopiasoftware_app_namespace].controller.\r\n                    evaluationReportPageViewModel.projectPicture3Url);\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        async backButtonClicked(){\r\n\r\n            // check if the side menu is open\r\n            if($('ons-splitter').get(0).right.isOpen){ // side menu open, so close it\r\n                $('ons-splitter').get(0).right.close();\r\n                return; // exit the method\r\n            }\r\n\r\n            // move to the view report page\r\n            $('#app-main-navigator').get(0).popPage();\r\n        },\r\n\r\n        /**\r\n         * method is triggered when the delete fab button is clicked\r\n         *\r\n         * @returns {Promise<void>}\r\n         */\r\n        async reportDeleteButtonClicked(fabElement = {},\r\n                                        docId = $('#app-main-navigator').get(0).topPage.data.reportDetails.id,\r\n                                        docRevision = $('#app-main-navigator').get(0).topPage.data.reportDetails.rev){\r\n\r\n            if(fabElement.disabled === true){ // if the delete fab button is disabled, do nothing\r\n                return;\r\n            }\r\n\r\n            // ask user to confirm evaluation report delete\r\n            let deleteReport = await ons.notification.confirm('Do you want to delete the report?',\r\n                {title: '<ons-icon icon=\"md-delete\" style=\"color: #3f51b5\" size=\"33px\"></ons-icon> <span style=\"color: #3f51b5; display: inline-block; margin-left: 1em;\">Delete Report</span>',\r\n                    buttonLabels: ['No', 'Yes'], modifier: 'utopiasoftware-alert-dialog'});\r\n\r\n            if(deleteReport == 0){ // user does not want to delete report, so exit method now\r\n                return; // exit method\r\n            }\r\n\r\n            // display the page preloader\r\n            $('#evaluation-report-page .page-preloader').css(\"display\", \"block\");\r\n\r\n            // remove the evaluation report from database\r\n            await utopiasoftware[utopiasoftware_app_namespace].model.appDatabase.remove(docId, docRevision);\r\n\r\n            // move to the view report page\r\n            await $('#app-main-navigator').get(0).popPage();\r\n\r\n            // get the list item corresponding to the evaluation report being deleted\r\n            var jQueryListItem = $(`#view-reports-page #view-reports-list ons-list-item[data-utopiasoftware-ptracker-report-id=\"${docId}\"]`);\r\n\r\n            // remove the element from the list item altogether\r\n            jQueryListItem.remove();\r\n\r\n            // inform the user that evaluation report has been delete\r\n            // display a toast to the user\r\n            await ons.notification.toast(`<ons-icon icon=\"md-delete\" size=\"28px\" style=\"color: #00D5C3\"></ons-icon> <span style=\"text-transform: capitalize; display: inline-block; margin-left: 1em\">Report Deleted</span>`, {timeout: 2500});\r\n        }\r\n    }\r\n\r\n};\r\n\r\n\r\n"]}